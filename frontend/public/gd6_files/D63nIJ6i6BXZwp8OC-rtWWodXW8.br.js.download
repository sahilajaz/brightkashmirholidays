(function(){var n,ii,ut,ri,yt,w,ft,et,ui,h,l,i,b,ot,rt,pt;try{var f=Microsoft.Maps,t=f.Internal,st=t.__assign,nt=t.__extends,ir=t.__spreadArray,s=f.globalConfig,tt=t.coreConfig,u=s.features,rr=u.advertising,ur=u.autosuggest,fr=u.calendar,er=u.collections,or=u.directions,sr=u.feedback,ht=u.flyover,ct=u.landmarks3D,a=u.map3D,hr=u.richMapsInfobox,cr=u.labels,lr=u.layerManager,c=u.localGuide,ar=u.localSearch,vr=u.mapDelay,yr=u.optIn,pr=u.print,wr=u.sharing,br=u.streetside,kr=u.birdseye,dr=u.taskBar,gr=u.taskFramework,nu=u.trafficControl,tu=u.traffic,iu=u.trafficExperiences,ru=u.transit,uu=u.travel,bt=u.xsr,f=Microsoft.Maps,t=f.Internal,lt=atlas.math,it=atlas.data,v=atlas.layer,kt=atlas.Pixel,r=it.BoundingBox,p=f.BingMapStyle,dt=f.DeviceInfo,fu=f.LocateMeControl,ci=f.MapControlInstrumentationHelper,e=f.Point,li=f.Rectangle,at=f.Size,ai=f.StylePicker,eu=f.BingCompassControl,ou=f.BingPitchControl,su=f.BingZoomControl,vi=f.TrafficPicker,o=t.AtlasHelper,k=t.AzureMapEvents,gt=t.BootstrapView,ni=t.dependencyResolver,yi=t.ExternalPromise,hu=t.InstrumentationBase,d=t.JSEvent,cu=t.LocalStorageCache,l=t.MapMath,vt=t.ObjectWithId,pi=t.ObservableCollection,ti=t.ObservableObject,wi=t.PerfV2Logger,y=t.TimeoutWrapper,h=t.VectorMath,n=function(){function n(n){Array.prototype.push.apply(this,n)}function t(i,r){if(i&&i instanceof n)return i;var u=!i&&[]||(r||typeof i=="string")&&t.query(i,r)||i instanceof Array&&i||[i];return new n(u)}function i(n,t){for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i])}return i(n,{length:Array.prototype.length,entities:function(){return Array.prototype.slice.apply(this)},sort:function(n){return Array.prototype.sort.call(this,n),this},reverse:function(){return Array.prototype.reverse.call(this),this},push:function(){return Array.prototype.push.apply(this,arguments),this},pop:function(){var t=Array.prototype.pop.call(this);return new n([t])},shift:function(){var t=Array.prototype.shift.call(this);return new n([t])},unshift:function(){return Array.prototype.unshift.apply(this,arguments),this},slice:function(){return new n(Array.prototype.slice.apply(this,arguments))},splice:function(){return new n(Array.prototype.splice.apply(this,arguments))},concat:function(t){return new n(Array.prototype.concat.apply(this.entities(),t.entities&&t.entities()||arguments))}}),t.Helper={get_guid:function(){var n=0;return function(t){if(!t)return"";if(t===window)return"win";if(t===document)return"doc";if(t.uniqueID)return t.uniqueID;var i="__$gimme$_guid__";return typeof t[i]=="undefined"&&(t[i]=i+n++),t[i]}}()},t.Browser=function(){var n=navigator.userAgent.toLowerCase(),t=-1,i;navigator.appName==="Microsoft Internet Explorer"&&(n=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(n)!==null&&(t=parseFloat(RegExp.$1)));var r=typeof ActiveXObject!="undefined"||typeof MSPointerEvent!="undefined",o=new RegExp("\\s+Edge/([0-9]+).[0-9]+"),u=o.exec(navigator.userAgent)!==null,f=n.indexOf("chrome")>-1&&!u,s=!f&&n.indexOf("safari")>-1,e=!1;try{e=document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0}catch(h){}return{is_ie:r,is_edge:u,is_opera:typeof opera!="undefined",is_chrome:f,is_khtml:n.indexOf("khtml")!==-1,is_gecko:n.indexOf("khtml")===-1&&n.indexOf("gecko")!==-1&&!r,is_in_quirks_mode:document.compatMode==="BackCompat",ie_version:t,is_webkit:n.indexOf("applewebkit/")!==-1,is_safari:s,is_WebpSupported:e}}(),t.undefined={}._$gimme$_undefined,t.ext=n.prototype,t}();n.ext.select=function(t){return n(t,this[0])};typeof g=="undefined"&&(window.g=n);n.Internals=new function(){function n(n){return function(t,i,r){this[n](t,i,r)}}return{addEventListener:n("addEventListener"),removeEventListener:n("removeEventListener"),attachEvent:n("attachEvent"),detachEvent:n("detachEvent")}};n.query=function(){return function(){function k(n,t,i){return r[t](n,i)}function d(n,t){var r=[],u=t.length,i;do i=h(n,t[--u]||t),i&&r.push(i);while(u);return r}function h(n,t){if(n===document||!t)return t;for(var i=t;(i=i.parentNode)&&i!==n;);return i===n&&t||null}function g(n,t){var i=n.document||document;return h(n,i.getElementById(t))}function c(n,t){var i,f,r,e;if(t=t||document,n.id)return a([g(t,n.id)],n);if(delete n.id,i=t.getElementsByTagName(n.tag||"*"),(!n.classes||n.classes.length<1)&&(!n.attributes||n.attributes.length<1)&&(!n.pseudos||n.pseudos.length<1))return l(i);for(f=[],e=i.length,r=0;r<e;r++)u(n,i[r])&&f.push(i[r]);return f}function u(n,t){if(!t)return!1;for(var u=n.propNames,f=u.length,i=0;i<f;i++)if(!r[u[i]](t,n[u[i]]))return!1;return!0}function l(n){for(var i=[],r=n.length,t=0;t<r;t++)i[t]=n[t];return i}function a(n,t){for(var r=[],f=n.length,i=0;i<f;i++)n[i]&&n[i].nodeType===1&&u(t,n[i])&&r.push(n[i]);return r}function y(n,t){return v(n,t)!==-1}function p(n){var r;t.inc();for(var u=t.name,f=[],e=n.length,i=0;i<e;i++)r=n[i],r[u]!==t.t&&(r[u]=t.t,f.push(r));return f}function w(n,t){if(!n)return!1;for(var r=" "+n+" ",i=t.length;i--;)if(r.indexOf(" "+t[i]+" ")===-1)return!1;return!0}function nt(n){var t=n.className;return typeof t!="string"&&(t=typeof n.getAttribute!="undefined"&&n.getAttribute("class")||""),t}function tt(n,t){typeof n.className=="string"?n.className=t:typeof n.setAttribute!="undefined"&&n.setAttribute("class",t)}function e(n){this.name=n;this.f=0;this.t=1;this.inc=function(){this.f=(this.t+=2)-1}}function it(n){this.parse=function(t){var u,i,o=n.preprocessInput,r,f,e;for(t=o&&o(t)||t,n.reset(),r=0,f=t.length;r<f;){if(u=t.charAt(r),i=i||n[u]||n["default"],i){if(e=i(t.substring(r,f)),!e)throw new Error('No valid match found for "'+i.name+'" rule');r+=e}else throw new Error('No suitable rule found to handle character "'+u+'"');i=null}return n.finish()}}function b(t,i){var w=i,r,u,h,o,a,y,v;if(i=i||document,n.inc(),typeof t!="string")return d(i||document,t);u=[];try{u=l(i.querySelectorAll(t))}catch(b){for(h=s.parse(t),a=h.length,o=0;o<a;o++){var f=h[o],p=f.length,e=p%2-1;for(r=e===0?c(f[e],i):[i||document];f[++e];)y=f[e++],v=f[e],v.root=i,r=k(r,y,v);u=a>1?u.concat(r):r}}return u}var t,i,n,r,o,s,v=function(){function n(n,t){return n.indexOf(t)}function t(n,t){for(var r=n.length,i=0;i<r;i++)if(n[i]===t)return i;return-1}return typeof Array.prototype.indexOf!="undefined"?n:t}(),f=function(){function n(n,t){return n.getAttribute(t)}function t(n,t){switch(t.toLowerCase()){case"class":return n.className||null;case"id":return n.id||null;case"href":case"src":if(typeof n.getAttribute!="undefined")return n.getAttribute(t,2)}return n.attributes&&n.attributes[t]&&n.attributes[t].nodeValue||n.getAttribute(t)}return function(){var i=document.createElement("div"),r;return i.innerHTML='<a href="#test">test<\/a>',r=i.firstChild,r.getAttribute("href")==="#test"?n:t}()}();return t=new e("__$gimme$_unique__"),i=new e("__$gimme$_genSib__"),n=new e("__$gimme$_nth__"),r={id:function(n,t){return n.id===t},tag:function(n,t){return n.tagName===t||t==="*"},classes:function(n,t){var i=n.className;return typeof i!="string"&&(i=f(n,"class")),w(i,t)},attributes:function(){var n={},t={parse:function(t){var i=t.match(/^\[([\w-_]+)?(\=|\^=|\$=|\*=|\|=|~=|!=)?(.*)\]$/);return n[t]={name:i&&i[1],delim:i&&i[2],val:i&&i[3].replace(/^['"]|["']$/g,"")}},"=":function(n,t){return n===t},"^=":function(n,t){return n.indexOf(t)===0},"$=":function(n,t){var i=n.lastIndexOf(t);return i!==-1&&i+t.length===n.length},"*=":function(n,t){return n.indexOf(t)!==-1},"|=":function(n,t){return n===t||n.indexOf(t+"-")===0},"~=":function(n,t){return n===t||y(n.split(" "),t)},"!=":function(n,t){return n!==t},unknown:function(){return!1}};return function(i,r){for(var e=r.length,u,o;e--;){if(u=n[r[e]]||t.parse(r[e]),o=f(i,u.name),!o)return!1;if(u.delim&&!t[u.delim||"unknown"](o,u.val))return!1}return!0}}(),pseudos:function(){function r(n){var t=n+"Sibling";return function(n){for(var i=n[t];i&&i.nodeType!==1;)i=i[t];return!i}}var i={},t={parse:function(n){var t=n.match(/([\w-_]+)\b(\((((-?\d*)n)?([+-]?\d+)?|.*)\))?/),r={name:t&&t[1],param:{wholeValue:t&&t[3],a:t&&t[5]||0,b:t&&t[6]||0}};return r.param.wholeValue==="even"?(r.param.a=2,r.param.b=0):r.param.wholeValue==="odd"&&(r.param.a=2,r.param.b=1),i[n]=r},"first-child":r("previous"),"last-child":r("next"),"only-child":function(n){return t["first-child"](n)&&t["last-child"](n)},"nth-child":function(t,i){var s=n.t*1e4,u=n.name,r=t.parentNode,h=0,f;if(r){if(r[u+":parent"]!==n.t){r[u+":parent"]=n.t;for(var h=0,e=r.children||r.childNodes,o=-1,c=e.length;++o<c;)e[o].nodeType===1&&(h++,e[o][u]=s+h)}return f=t[u]-s-i.param.b,!i.param.a&&i.param.b?f===0:i.param.a*f>=0&&f%(i.param.a||1)==0}return!1},contains:function(n,t){return(n.textContent||n.innerText||n.innerHTML).indexOf(t.param.wholeValue)!==-1},not:function(){return!1}};return function(n,r){for(var u=r.length,f;u--;)if(f=i[r[u]]||t.parse(r[u]),!t[f.name](n,f))return!1;return!0}}()," ":function(n,t){for(var r=[],f=n.length,u,i=0;i<f;i++)if(u=c(t,n[i]),r=r.concat(u),t.id&&u.length===1)break;return p(r)},">":function(n,t){for(var r=[],u=n.length,i=0;i<u;i++)r=r.concat(a(n[i].childNodes,t));return r},"+":function(n,t){for(var f=[],o=n.length,e,i,r=0;r<o;r++){for(e=n[r],i=e.nextSibling;i&&i.nodeType!==1;)i=i.nextSibling;u(t,i)&&f.push(i)}return f},"~":function(n,t){var s,r;i.inc();for(var e=i.name,o=[],h=n.length,f=0;f<h;f++)for(s=n[f],r=s.nextSibling;r&&r[e]!==i.t;)r.nodeType===1&&(r[e]=i.t,u(t,r)&&o.push(r)),r=r.nextSibling;return o}},o=new function(){function i(){this.propNames=[]}var r,t,n;return i.prototype.propNames=[],i.prototype.storePropertyValue=function(n,t){this[n]=t;this.propNames[n]||(this.propNames.push(n),this.propNames[n]=!0)},i.prototype.storeArrayValue=function(n,t){this[n]||(this[n]=[]);this[n].push(t);this.propNames[n]||(this.propNames.push(n),this.propNames[n]=!0)},{preprocessInput:function(n){return n.replace(/\s*([ >+~,])\s*/g,"$1")},reset:function(){r=[];t=[];n=new i},finish:function(){return n&&n.propNames.length>0&&t.push(n),t.length>0&&r.push(t),r},"default":function(t){var r=t.match(/(\w+|\*)/),i;return r?(i=r[0].toUpperCase(),n.storePropertyValue("tag",i),i.length):null},"#":function(t){var i=t.match(/#([_\-\w]+)/),r;return i?(r=i[1],n.storePropertyValue("id",r),i[0].length):null},".":function(t){var i=t.match(/\.([_\-\w\d]+)/),r;if(i)return r=i[1],n.storeArrayValue("classes",r),i[0].length},"[":function(t){var r=t.match(/(\[.*"\]|.*?\])/),i;return r?(i=r[0],n.storeArrayValue("attributes",i),i.length):null},":":function(t){var r=t.match(/:[\w-_]+\b(\(.*\))?/),i;return r?(i=r[0],n.storeArrayValue("pseudos",i),i.length):null}," ":function(){return t.push(n," "),n=new i,1},">":function(){return n.propNames.length>0&&t.push(n),t.push(">"),n=new i,1},"~":function(){return t.push(n,"~"),n=new i,1},"+":function(){return t.push(n,"+"),n=new i,1},",":function(){return t.push(n),r.push(t),t=[],n=new i,1}}},s=new it(o),b.Internal={unique:p,index_of:v,contains:y,contains_class:w,has_class:r.classes,get_attr:f,get_class:nt,set_class:tt},b}()}();n.Helper.index_of=n.query.Internal.index_of;n.Helper.contains=n.query.Internal.contains;n.Helper.unique=n.query.Internal.unique;n.Helper.get_attr=n.query.Internal.get_attr;n.Helper.contains_class=n.query.Internal.contains_class;n.Helper.has_class=n.query.Internal.has_class;n.Helper.get_class=n.query.Internal.get_class;n.Helper.set_class=n.query.Internal.set_class;n.Effects={Animation:function(n){function s(n){for(var h=e(n),r=t.length,o,s;r--;){s={};for(o in u)s[o]=i[o][r]+u[o][r]*h;f(t[r],s,n)}}var t=n.elements||[],o=n.duration||1,i=n.from||{},r=n.to||{},u={},f,e;(function(){var f,n,s,e={},o={},h={};for(n in i)for(e[n]=[],o[n]=[],h[n]=[],f=t.length;f--;)s=t[f],e[n][f]=typeof i[n]=="function"?i[n](s,n):i[n],o[n][f]=typeof r[n]=="function"?r[n](s,n):r[n],h[n][f]=o[n][f]-e[n][f];i=e;r=o;u=h})();f=n.animate;e=n.easing||function(n){return n};this.startTime=n.startTime||0;this.duration=o;this.add_element=function(n){t.push(n)};this.remove_element=function(n){for(var i=t.length;i--;)if(t[i]===n){t.splice(i,1);break}};this.tick=s},Storyboard:function(t){function f(){e||(e=!0,s=Date.now(),o=n.Effects.Animation.requestAnimationFrame(v))}function p(){i=0;r=1;f()}function w(){c();a&&a(i)}function c(){n.Effects.Animation.cancelAnimationFrame(o);e=!1}function b(){f()}function k(){r=1;f()}function d(){r=-1;f()}function g(){r*=-1;f()}function nt(n){i=n;y()}function tt(){return i}function it(){return e}function rt(){return r}function ut(){return u}function ft(){return h}function v(){var t=Date.now();i+=(t-s)/h*r;s=t;i=i<0?0:i>1?1:i;y();r===-1&&i===0||r===1&&i===1?(c(),l&&l(i)):o=n.Effects.Animation.requestAnimationFrame(v)}function y(){for(var t=u.length,n;t--;)n=(h*i-u[t].startTime)/u[t].duration,n=r===-1&&n<0?0:r===1&&n>1?1:n,n>=0&&n<=1&&u[t].tick(n)}var o,s,i=0,r=1,e=!1,u=t.animations,h=t.duration||0,et=t.interval||1,l=t.completed,a=t.aborted;this.begin=p;this.abort=w;this.pause=c;this.resume=b;this.forward=k;this.backward=d;this.reverse=g;this.seek=nt;this.get_position=tt;this.is_running=it;this.get_direction=rt;this.get_animations=ut;this.get_duration=ft},Easing:{Back:new function(){function n(n,t,i,r){return t=.5,i=0,r=.5,Math.pow(1-n,i)*r*Math.sin(2*Math.PI*n*t)*-1+n}function t(){}function i(){}this.ease_in=n;this.ease_out=t;this.ease_in_out=i},Bounce:new function(){function t(n,t,i){return t=t||1.5,i=i||4,Math.abs(Math.pow(n,t)*Math.cos(Math.PI*n*i))}function i(t,i,r){return 1-n.Effects.Easing.Bounce.ease_in(1-t,i,r)}function r(t,i,r){var u=0,f=n.Effects.Easing.Bounce.ease_in;return t>.5&&(f=n.Effects.Easing.Bounce.ease_out,t-=.5,u=1/2),f(t,i,r)-u}this.ease_in=t;this.ease_out=i;this.ease_in_out=r},Elastic:new function(){function n(){}function t(n,t,i){return t=t||3.5,i=i||5,1-Math.pow(1-n,t)*Math.cos(2*Math.PI*n*i)}function i(){}this.ease_in=n;this.ease_out=t;this.ease_in_out=i},Exponential:new function(){function n(n,t){return Math.pow(n,t)}function t(n,t){return Math.pow(n,1/t)}function i(i,r){return i<=.5?n(i*2,r)*.5:t((i-.5)*2,r)*.5+.5}this.ease_in=n;this.ease_out=t;this.ease_in_out=i}},Enums:{Directions:{vertically:1,horizontally:2,both:3},Speeds:{quickly:500,slowly:1e3}},RunningAnimations:function(){var t={};return{add:function(n,i){t[n]=i},remove:function(n){delete t[n]},get:function(i){return t[i]||new n.Effects.Storyboard({animations:[]})},contains:function(n){return!!t[n]}}}()};n.Effects.Storyboard.create=function(t,i,r,u,f,e,o,s,h){f=Math.floor(f)||n.Effects.Enums.Speeds[f]||n.Effects.Enums.Speeds.quickly;var c=new n.Effects.Storyboard({duration:f,interval:h,completed:function(){o&&o.call(this);n.Effects.RunningAnimations.remove(e);c=null},aborted:function(){n.Effects.RunningAnimations.remove(e);c=null},animations:[new n.Effects.Animation({from:i,to:r,duration:f,animate:u,easing:s,elements:t})]});return e&&n.Effects.RunningAnimations.add(e,c),c},function(){var t=0,i={};n.Effects.Animation.requestAnimationFrame=function(){function u(n,t){return function(){try{i[t]&&n(Date.now());delete i[t]}catch(r){if(Microsoft.Maps.logger)Microsoft.Maps.logger.logCriticalError(r);else throw r;}}}function e(n,f){var e=i[++t]=u(n,t);return r(e,f),t}function o(n){var r=i[++t]=u(n,t);return y.setTimeout(r,f),t}var f=16,n=window,r=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame;return r?e:o}();n.Effects.Animation.cancelAnimationFrame=function(n){delete i[n]}}();n.Screen=new function(){function t(){return typeof innerWidth!="undefined"?{width:window.innerWidth,height:window.innerHeight}:typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:{width:document.getElementsByTagName("body")[0].clientWidth,height:document.getElementsByTagName("body")[0].clientHeight}}function i(n){var t,i;return n=n||window.event,t={x:0,y:0},typeof n.pageX!="undefined"?(t.x=n.pageX,t.y=n.pageY):(i=this.get_scroll_pos(),t.x=n.clientX+i.x,t.y=n.clientY+i.y),t}function r(){return n(window).get_scroll_pos()}this.get_viewport_size=t;this.get_mouse_pos=i;this.get_scroll_pos=r};n.Util=new function(){function t(){return n(arguments,!1)}function i(){return n(arguments,!0)}function n(n,t){function u(){i.apply(this,Array.prototype.slice.call(n,2));t||(i=null)}var i=n[0],r=n[1];return t===!0?y.setInterval(u,r):y.setTimeout(u,r)}this.set_timeout=t;this.set_interval=i};n.Style=new function(){function o(i){var u=i.scrollTop&&i!==document.documentElement&&i!==document.body&&i.tagName!=="TEXTAREA"&&i.tagName!=="INPUT"?-1:0,r={x:i.scrollLeft*u,y:i.scrollTop*u},f;return n.Browser.is_ie&&t(i,"position")==="static"?(f=i.style.position,i.style.position="relative",r.x+=i.offsetLeft,r.y+=i.offsetTop,i.style.position=f):(r.x+=i.offsetLeft,r.y+=i.offsetTop),r}function l(u){var f={x:0,y:0},s;if(u.getBoundingClientRect){var e=u.getBoundingClientRect(),h=r(),c=n(window).get_scroll_pos();f.x=e.left-h.x+c.x;f.y=e.top-h.y+c.y;f.width=e.width;f.height=e.height}else while(u!==null)s=o(u),f.x+=s.x,f.y+=s.y,u=u.offsetParent,u&&!i()&&(f.x+=parseFloat(t(u,"borderLeftWidth"))||0,f.y+=parseFloat(t(u,"borderTopWidth"))||0);return f}function i(){var n,t;return typeof i.constantValue=="undefined"&&(n=document.createElement("div"),n.style.cssText="position:absolute;visibility:hidden;top:0;left:0;border:1px solid #000;",t=document.createElement("div"),n.appendChild(t),document.body.appendChild(n),i.constantValue=t.offsetTop===1,document.body.removeChild(n),n=t=null),i.constantValue}function r(){var i,u;if(typeof r.constantValue=="undefined"){var t=document.documentElement,f=t.style.position,e=t.style.margin,o=t.style.border;t.style.position="static";t.style.margin="0";t.style.border="1px solid transparent";i=t.getBoundingClientRect();u=n(window).get_scroll_pos();r.constantValue={x:i.left+u.x,y:i.top+u.y};t.style.position=f;t.style.margin=e;t.style.border=o;document.documentElement.className=document.documentElement.className}return r.constantValue}function t(n,t){var i="",r,e,f;return n.currentStyle&&(t==="right"||t==="bottom")?i=u(t,"auto","auto",n)+"px":(r=document.defaultView&&document.defaultView.getComputedStyle&&document.defaultView.getComputedStyle(n,null)||n.currentStyle,r&&(i=r[t]||"",e=i.match(/px$/),e||(f=i.match(/(em|ex|%|in|cm|mm|pt|pc|small|medium|large|thin|thick|auto)$/),f&&(i=u(t,i,f[0],n)+"px")))),i}function u(i,r,u,f){var s,h,a,o,c,v,y,p,l,e,w;if(r){if(u==="px")return parseFloat(r);if(r==="auto")switch(i){case"top":case"left":return 0;case"bottom":case"right":if(s={bottom:["top","offsetTop","height","offsetHeight"],right:["left","offsetLeft","width","offsetWidth"]},h=n(f),h.get_style("position")==="relative")return a=s[i][0],-parseInt(h.get_style(a));for(o=f.parentNode;o!==document&&n(o).get_style("position")==="static";)o=o.parentNode;return c=s[i][2],v=o===document?n.Screen.get_viewport_size()[c]:parseInt(n(o).get_style(c)),y=s[i][1],p=s[i][3],v-f[y]-f[p];case"height":return f.clientHeight||f.offsetHeight&&f.offsetHeight-parseFloat(t(f,"borderTopWidth"))-parseFloat(t(f,"borderBottomWidth"))||0;case"width":return f.clientWidth||f.offsetWidth&&f.offsetWidth-parseFloat(t(f,"borderLeftWidth"))-parseFloat(t(f,"borderRightWidth"))||0;default:return 0}else{switch(i){case"borderLeftWidth":case"borderRightWidth":case"borderTopWidth":case"borderBottomWidth":return i=i.replace("Width","Style"),l=t(f,i),l==="none"?0:parseFloat(l)}f=f||document.body;e=document.createElement("div");e.style.visbility="hidden";e.style.position="absolute";e.style.lineHeight="0";u==="%"?(f=f.parentNode,i==="height"||i==="top"?e.style.height=r:(i==="width"||i==="left")&&(e.style.width=r)):(e.style.borderStyle="solid",e.style.borderBottomWidth="0",e.style.borderTopWidth=r);try{f.appendChild(e)}catch(b){f=f.parentNode;f.appendChild(e)}return f.offsetWidth,f.offsetHeight,w=e.offsetHeight||e.offsetWidth,f.removeChild(e),w}}else return 0}function a(n,t){var r,i;return t=t||document.body,r=f[n],r||(i=c(n),t.style[i]===undefined&&(i=v(i,t)||n),r=f[n]=i),r}function v(n,t){for(var r=c("-"+n),i=e.length;i--;)if(n=e[i]+r,t.style[n]!==undefined)return n;return""}function c(n){return n.replace(/-(\w)/g,function(n,t){return t.toUpperCase()})}function y(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}var s,h,f,e;this.get_relative_pos=o;this.get_absolute_pos=l;this.offset_includes_borders=i;this.get_bounding_client_rect_offsets=r;s=function(){function t(n,t){n.style.opacity=t}function i(n,t){t*=100;var i;try{i=n.filters.item("DXImageTransform.Microsoft.Alpha");t<100?(i.Opacity=t,i.enabled||(i.enabled=!0)):i.enabled=!1}catch(r){t<100&&(n.style.filter=(n.currentStyle||n.runtimeStyle).filter+" progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")")}}var n=document.createElement("div");return typeof n.style.opacity!="undefined"&&t||typeof n.style.filter!="undefined"&&i||function(){}}();this.set_opacity=s;h=function(){function i(n){return parseFloat(n.style.opacity)||t(n,"opacity")}function r(n){var t=n.filters["DXIMageTransform.Microsoft.Alpha"];return t?t.Opacity/100:1}var n=document.createElement("div");return typeof n.style.opacity!="undefined"&&i||typeof n.style.filter!="undefined"&&r||function(){}}();this.get_opacity=h;this.get_rendered_style=t;this.normalize_style=u;f={};e=["O","ms","Moz","Webkit"];this.get_camelized_style_name=a;this.get_dasherized_style_name=y};n.Events=new function(){var i=n.Helper,r=null,t=null;this.capture_mouse=function(i,u){return n.Events.release_mouse(),r=i,u!==!1&&(u=!0),i.setCapture!==undefined?i.setCapture(u):(t=function(i){var e=i.target,f,o,s;try{f=new MouseEvent(i.type,i)}catch(h){f=document.createEvent("MouseEvents");f.initMouseEvent(i.type,i.bubbles,i.cancelable,window,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)}f.originalWhich=i.which;f.originalButtons=i.buttons;f.__defineGetter__&&(o=n.Screen.get_scroll_pos(),f.__defineGetter__("pageX",function(){return this.clientX+o.x}),f.__defineGetter__("pageY",function(){return this.clientY+o.y}));document.removeEventListener(i.type,t,!0);f.captureTarget=e;s=r;u||n(r).has(e)&&(s=e);s.dispatchEvent(f);t!==null&&document.addEventListener(i.type,t,!0);delete f.captureTarget;i.stopPropagation()},document.addEventListener("mouseover",t,!0),document.addEventListener("mouseout",t,!0),document.addEventListener("mousemove",t,!0),document.addEventListener("mouseup",t,!0),document.addEventListener("mousedown",t,!0),document.addEventListener("click",t,!0),document.addEventListener("dblclick",t,!0)),this};this.release_mouse=function(){return r!==null&&(r.releaseCapture!==undefined?r.releaseCapture():(document.removeEventListener("mouseover",t,!0),document.removeEventListener("mouseout",t,!0),document.removeEventListener("mousemove",t,!0),document.removeEventListener("mouseup",t,!0),document.removeEventListener("mousedown",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("dblclick",t,!0)),r=t=null),this};this.get_capture_target=function(n){return n.captureTarget||n.srcElement||n.target};this.Pseudo=new function(){function r(n,t,i){this.pseudoName=n;this.getNativeName=t;this.getProxiedHandler=i}function l(n,t,i){if(n===t)return!1;for(var r=0;t&&t!=n;)r++,t=t.parentNode;return i=i||r,t===n&&i===r}function y(n){var u=i.get_guid(n),r=t[u];return r||(r=t[u]=function(t){var i=t.relatedTarget;i&&this!==i&&!l(this,i)&&n.call(this,t)}),r}function p(n){var u=i.get_guid(n),r=t[u];return r||(r=t[u]=function(t){var i=t.relatedTarget;i&&(this===i||l(this,i))||n.call(this,t)}),r}function w(r){if(!n.Browser.is_gecko)return r;var f=i.get_guid(r),u=t[f];return u||(u=t[f]=function(n){n.wheelDelta=-40*n.detail;r.call(this,n);n.wheelDelta=null}),u}function h(r){if(!(n.Browser.is_ie||n.Browser.is_edge))return r;var e=i.get_guid(r),u=t[e];return u||(u=t[e]=function(t){var o,u,s,h,e;if(t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType==="touch"){t.type==="MSPointerUp"||t.type==="pointerup"||t.type==="MSPointerCancel"||t.type==="pointercancel"?delete f[t.pointerId]:(o=n.Screen.get_mouse_pos(t),f[t.pointerId]={_$targetId:i.get_guid(t.target),identifier:t.pointerId,pageX:o.x,pageY:o.y});s=[];h=[];for(u in f)f.hasOwnProperty(u)&&f[u]&&(e=f[u],s.push(e),e._$targetId===i.get_guid(t.target)&&h.push(e));t.touches=s;t.targetTouches=h;(t.type==="MSPointerDown"||t.type==="pointerdown")&&(t.preventDefault=b);r.call(this,t);t.touches=t.targetTouches=null}}),u}function b(){u[this.pointerId]=!0;var t=n.Browser.is_ie&&n.Browser.ie_version<11;return document.addEventListener(t?"MSPointerUp":"pointerup",a,!0),document.addEventListener("click",v,!0),(t?MSPointerEvent:PointerEvent).prototype.preventDefault.call(this)}function a(n){e=n.pointerId;u[e]&&(u[e]=!1)}function v(t){var i,r=0,f;for(i in u)i=parseInt(i),u[i]===!1&&delete u[i]||r++,i===e&&(t.stopPropagation()||t.preventDefault());r===0&&(f=n.Browser.is_ie&&n.Browser.ie_version<11,document.removeEventListener(f?"MSPointerUp":"pointerup",a,!0),document.removeEventListener("click",v,!0))}function c(){}var e=null,u={},t={},f={},o=n.Browser.is_ie&&n.Browser.ie_version<11,s={touchstart:o?"MSPointerDown":"pointerdown",touchend:o?"MSPointerUp":"pointerup",touchmove:o?"MSPointerMove":"pointermove",touchcancel:o?"MSPointerCancel":"pointercancel"};return r.prototype.add=function(n,t,i){n.add_event(this.getNativeName(this.pseudoName),this.getProxiedHandler(t,n),i,!0)},r.prototype.remove=function(r,u,f){r.remove_event(this.getNativeName(this.pseudoName),this.getProxiedHandler(u,r,!0),f,!0);var e=i.get_guid(u);e&&delete t[e];this.pseudoName==="touchstart"&&n(document).remove_event("touchend",c,!0).remove_event("touchcancel",c,!0)},{mouseenter:new r("mouseenter",function(){return"mouseover"},function(n){return y(n)}),mouseleave:new r("mouseleave",function(){return"mouseout"},function(n){return p(n)}),mousewheel:new r("mousewheel",function(t){return n.Browser.is_gecko?"DOMMouseScroll":t},function(n){return w(n)}),touchstart:new r("touchstart",function(t){return n.Browser.is_ie||n.Browser.is_edge?s[t]:t},function(t,i,r){return r||n(document).add_event("touchend",c,!0).add_event("touchcancel",c,!0),h(t)}),touchend:new r("touchend",function(t){return n.Browser.is_ie||n.Browser.is_edge?s[t]:t},function(n){return h(n)}),touchmove:new r("touchmove",function(t){return n.Browser.is_ie||n.Browser.is_edge?s[t]:t},function(n){return h(n)}),touchcancel:new r("touchcancel",function(t){return n.Browser.is_ie||n.Browser.is_edge?s[t]:t},function(n){return h(n)})}}},function(){var u=n.Helper,e=n.Internals,i,t,o={},f={},r={load:!1,unload:!1,focus:!1,blur:!1,beforeunload:!1,stop:!1,beforeprint:!1,afterprint:!1,propertychange:!1,filterchange:!1,readystatechange:!1,losecapture:!1};n.ext.add_event=function(){function s(t,i,r,u){for(var f,s=t?t.split(","):[],o=0;o<s.length;o++)f=s[o].trim(),!u&&n.Events&&n.Events.Pseudo&&n.Events.Pseudo[f]?n.Events.Pseudo[f].add(this,i,r):this.for_each(function(n){e.addEventListener.call(n,f,i,r)});return this}function h(s,h,c,l){function p(i,r){t=t||1;r.eventPhase=t;r.target=r.srcElement;r.currentTarget=i;var u=n.Screen.get_mouse_pos(r);r.pageX=u.x;r.pageY=u.y;switch(r.type){case"keyup":case"keydown":case"keypress":i.type!=="file"&&(r.keyCode===186?r.keyCode=59:r.keyCode===187?r.keyCode=61:r.keyCode===189?r.keyCode=109:null);r.which=r.keyCode;r.charCode=r.keyCode;break;case"mousedown":case"mouseup":case"click":case"dblclick":case"contextmenu":r.which=[1,1,3,r.button,2][r.button];break;case"mouseover":r.relatedTarget=r.fromElement;break;case"mouseout":r.relatedTarget=r.toElement}return r.preventDefault=function(){r.returnValue=!1},r.stopPropagation=function(){r.cancelBubble=!0},r}function w(n,t,i){var u=r[n],f;return u===!1?!1:(u||(u=r[n]={}),f=u[t],f||(f=u[t]=[]),f.push(i),!0)}function b(n,t){var r=f[n],i;r||(r=f[n]={});i=r[t];i||(i=r[t]={handlerCount:0,remainingHandlers:0});i.handlerCount++;i.remainingHandlers=i.handlerCount}function k(n,f){for(var l=[],h=n,o,e,s,v,c;h;)l.push(h),h=h.parentNode;while(o=l.pop())if(e=u.get_guid(o),r[a][e])for(i||(i=o),v=r[a][e].length,s=0;s<v;s++)f.cancelBubble||(o===f.target&&(f.eventPhase=t=2),c=r[a],c[e]&&c[e][s]&&c[e][s].call(o,f));return i}for(var a,y=s?s.split(","):[],v=0;v<y.length;v++)a=y[v].trim(),!l&&n.Events&&n.Events.Pseudo&&n.Events.Pseudo[a]?n.Events.Pseudo[a].add(this,h,c):this.for_each(function(n){var l=u.get_guid(n),y=u.get_guid(h)+(c||!1).toString(),v="{"+l+" / "+a+" / "+y+"}",s;c&&(c=w(a,l,h));s=o[v];s||(s=function(u){var e=f[a][l];e.remainingHandlers--;u=p(n,u);r[a]&&t===1&&(i=k(n,u));t=n===u.target?2:3;u.eventPhase=t;c||u.cancelBubble||h.call(n,u);(!i||u.cancelBubble||n==i&&e.remainingHandlers===0)&&(t=1,i=undefined,e.remainingHandlers=e.handlerCount);u.eventPhase=u.target=u.currentTarget=u.relatedTarget=u.which=u.preventDefault=u.stopPropagation=u.pageX=u.pageY=undefined},o[v]=s,e.attachEvent.call(n,"on"+a,s),b(a,l));v=null;s=null});return this}return document.addEventListener?s:document.attachEvent?h:function(){}}();n.ext.remove_event=function(){function t(t,i,r,u){for(var f,s=t?t.split(","):[],o=0;o<s.length;o++)f=s[o].trim(),!u&&n.Events&&n.Events.Pseudo&&n.Events.Pseudo[f]?n.Events.Pseudo[f].remove(this,i,r):this.for_each(function(n){e.removeEventListener.call(n,f,i,r)});return this}function i(t,i,s,h){function v(t,i,u){var e=r[t],f,o;e&&(f=e[i],f&&(o=n(f).index_of(u),o!==-1&&f.splice(o,1),f.length===0&&delete e[i]))}function y(n,t){var i=f[n]&&f[n][t];i&&(i.handlerCount>0&&i.handlerCount--,i.remainingHandlers=i.handlerCount)}for(var c,a=t?t.split(","):[],l=0;l<a.length;l++)c=a[l].trim(),!h&&n.Events&&n.Events.Pseudo&&n.Events.Pseudo[c]?n.Events.Pseudo[c].remove(this,i,s):this.for_each(function(n){var r=u.get_guid(n),h=u.get_guid(i)+(s||!1).toString(),f="{"+r+" / "+c+" / "+h+"}",t;s&&v(c,r,i);t=o[f];t&&(e.detachEvent.call(n,"on"+c,t),delete o[f],y(c,r));f=null;t=null});return this}return document.addEventListener?t:document.attachEvent?i:function(){}}()}(),function(){var t=n.Helper;n.ext.add_class=function(i){var r=i.split(/\s+/);return this.for_each(function(i){var u=t.get_class(i);n(r).for_each(function(n){t.contains_class(u,[n])||(u===""?u=n:u+=" "+n)});t.set_class(i,u)}),this}}();n.ext.remove_class=function(n){return this.swap_class(n,"$1")},function(){var t=n.Helper;n.ext.swap_class=function(i,r){r!=="$1"&&(r=" "+r+" ");var u=i.split(/\s+/);return this.for_each(function(i){var f=t.get_class(i);n(u).for_each(function(n){var t=new RegExp("(^| )"+n+"( |$)");f=f.replace(t,r)});t.set_class(i,f.replace(/^\s+|\s+$/g,""))}),this}}(),function(){var t=n.Helper;n.ext.has_class=function(n,i){var r=this[i||0];return r&&t.has_class(r,[n])||!1}}();n.ext.get_html=function(n){var t=this[n||0];return t&&t.innerHTML||""};n.ext.set_html=function(n){return this.for_each(function(t){t.innerHTML=n}),this};n.ext.get_val=function(n){var t=this[n||0];return t&&t.value||""};n.ext.set_val=function(n){return this.for_each(function(t){typeof t.value!="undefined"&&(t.value=n)}),this},function(){var t=n.Helper.get_attr;n.ext.get_attr=function(n,i){var r=this[i||0];return r&&t(r,n)||""}}();n.ext.set_attr=function(n,t){return this.for_each(function(i){var r;i.tagName.toUpperCase()==="INPUT"&&((r=n==="checked")||n==="value")?(i[n]=t,r&&(i.defaultChecked=t)):n.toUpperCase()==="CLASS"?i.className=t:i.setAttribute(n,t)}),this},function(){var t=n.Style.get_rendered_style,i=n.Style.get_opacity,r=n.Style.get_camelized_style_name;n.ext.get_style=function(n,u){var f=this[u||0];return f?n==="opacity"?i(f):t(f,r(n)):""}}(),function(){var t=n.Style.set_opacity,i=n.Style.get_camelized_style_name;n.ext.set_style=function(n){return this.for_each(function(r){var e,u,f;for(e in n){u=n[e];f=i(e);switch(f){case"height":case"maxHeight":case"minHeight":case"width":case"maxWidth":case"minWidth":case"top":case"right":case"bottom":case"left":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":r.style[f]=typeof u=="number"&&u+"px"||u;break;case"opacity":t(r,u);break;default:r.style[f]=u}}}),this}}();n.ext.get_native_prop=function(n,t){var i=this[t||0];return i?i[n]:""};n.ext.parent=function(t){var i=this[t||0];return n(i&&i.parentNode)};n.ext.element=function(n){return this[n||0]};n.ext.get_ancestor=function(t,i){for(var r=this[i||0],u=t;u-->0;)if(r)r=r.parentNode;else break;return n(r)};n.ext.get_sibling=function(t,i){var f=this[i||0],r=f;if(t!==0)for(var e=t>0?"nextSibling":"previousSibling",o=Math.abs(t),u=0;u<o;){if(r=r[e],!r)break;r.nodeType===1&&u++}return n(r)};n.ext.for_each=function(){function n(n,t){return this.entities().forEach(n,t),this}function t(n,t){for(var r=this.entities(),u=r.length,i=0;i<u;i++)n.call(t,r[i],i,r);return this}return typeof Array.prototype.forEach!="undefined"?n:t}();n.ext.iterate=function(t){for(var u=this.length,r,i=0;i<u;i++)r=n(this[i]),t.call(r,i);return t=null,this};n.ext.filter=function(t){for(var r=n(),i=this.length;i--;)t(this[i])&&r.unshift(this[i]);return r};n.ext.map=function(){function t(t,i){return n(this.entities().map(t,i))}function i(t,i){for(var r=n(),u=this.length;u--;)r.unshift(t.call(i,this[u]));return r}return typeof Array.prototype.map!="undefined"?t:i}(),function(){var t=n.Helper;n.ext.contains=function(n){return t.contains(this.entities(),n)}}(),function(){var t=n.Helper;n.ext.index_of=function(n){return t.index_of(this.entities(),n)}}();n.ext.select=function(t){return n(t,this[0])};n.ext.has=function(t,i){var r=this[i||0];return n(t,r).length>0},function(){var t=n.Helper;n.ext.unique=function(){return n(t.unique(this.entities()))}}(),function(){var t=n.Style.get_rendered_style;n.ext.get_style_pos=function(n){var i=this[n||0];return{x:parseFloat(t(i,"left")),y:parseFloat(t(i,"top"))}}}(),function(){var t=n.Style.get_absolute_pos;n.ext.get_absolute_pos=function(n){var i=this[n||0];return i&&t(i)||{x:0,y:0}}}(),function(){var t=n.Style.get_relative_pos;n.ext.get_relative_pos=function(n){var i=this[n||0];return i&&t(i)||{x:0,y:0}}}(),function(){n.ext.get_scroll_pos=function(t){var r=this[t||0],i={x:0,y:0};return r===window?typeof pageYOffset!="undefined"?(i.x=window.pageXOffset,i.y=window.pageYOffset):n.Browser.is_in_quirks_mode||typeof document.documentElement.scrollTop=="undefined"?typeof document.body.scrollTop!="undefined"&&(i.x=document.body.scrollLeft,i.y=document.body.scrollTop):(i.x=document.documentElement.scrollLeft,i.y=document.documentElement.scrollTop):(i.x=r.scrollLeft,i.y=r.scrollTop),i}}();n.ext.animate=function(t,i,r,u,f){function l(n,t,i){switch(n){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;default:return i}}function s(t,i){var r=n(t).get_style(i)+"",u=parseFloat(r);return e.units[i]=r.replace(u,""),u}function a(n,i){var e=s(n,i),r=t[i]+"",u=r.match(/^[+\-*\/]/),f=u&&u[0]||"noOp";return r=Number(r.replace(f,"")),l(f,e,r)}var e={units:{},ops:{}},h={},o,c;for(o in t)e[o]=s,h[o]=a;return c=n.Effects.Storyboard.create(this,e,h,function(t,i){var f=n(t),r,u;for(r in i)r!=="units"&&(u={},u[r]=i[r]+e.units[r],f.set_style(u))},i,r,u,f),c.begin(),this};n.ext.bounce=function(t,i,r,u,f){function e(t){return n(t).get_style_pos().y}t===null&&(t=e);var o=n.Effects.Storyboard.create(this,{top:t},{top:i},function(n,t){n.style.top=Math.ceil(t.top)+"px"},r,u,f,n.Effects.Easing.Bounce.ease_out);return o.begin(),this},function(){function t(t,i,r,u,f){this.set_style({zoom:1});t===null&&(t=function(t,i){return Number(n(t).get_style(i))});var e=n.Effects.Storyboard.create(this,{opacity:t},{opacity:i},function(t,i){n(t).set_style({opacity:i.opacity})},r,u,f,null);return e.begin(),this}n.ext.fade_to=t;n.ext.fade_in=function(n,i,r,u,f,e){return t.call(this,n,i,r,u,f,e)};n.ext.fade_out=function(n,i,r,u,f,e){return t.call(this,n,i,r,u,f,e)}}();n.ext.slide=function(t,i,r,u,f,e){function o(t,i){i=i==="left"?"x":"y";var r=t.__pos;return r||(r=t.__pos=n(t).get_style_pos()),i==="y"&&(t.__pos=n.undefined),r[i]}t===null&&(t={x:o,y:o});var s=Math.round,h=n.Effects.Easing.Exponential.ease_in_out,c=n.Effects.Storyboard.create(this,{left:t.x,top:t.y},{left:i.x,top:i.y},function(n,t){n.style.top=s(t.top)+"px";n.style.left=s(t.left)+"px"},r,u,f,e||function(n){return h(n,4)});return c.begin(),this};n.ext.scroll_to=function(t,i,r,u){var f=n.Screen.get_scroll_pos(),e=n(this[0]).get_absolute_pos(),o=Math.round,s=n.Effects.Easing.Exponential.ease_out,h=n.Effects.Storyboard.create([window],{scrollX:f.x,scrollY:f.y},{scrollX:e.x,scrollY:e.y},function(n,t){n.scrollTo(o(t.scrollX),o(t.scrollY))},t,i,r,u||function(n){return s(n,4)});return h.begin(),this};n.ext.veil=function(t,i,r,u,f){function l(t,i){var r=parseInt(n(t).get_style(i),10);return t[h]=t[h]||{},t[h][i]=r}var e=n.Effects.Enums.Directions,h,o,s,c;return t=Math.floor(t)||e[t]||e.vertically,h="_$gimme$_veil",o={},s={},(t&e.vertically)===e.vertically&&(s.height=s.paddingTop=s.paddingBottom=l,o.height=o.paddingTop=o.paddingBottom=0),(t&e.horizontally)===e.horizontally&&(s.width=s.paddingLeft=s.paddingRight=l,o.width=o.paddingLeft=o.paddingRight=0),c=n.Effects.Storyboard.create(this.filter(function(t){var i=t.style.display||n(t).get_style("display");return i!=="none"}),s,o,function(n,i){var r=n.style;(t&e.vertically)===e.vertically&&(r.height=i.height+"px",r.paddingTop=i.paddingTop+"px",r.paddingBottom=i.paddingBottom+"px");(t&e.horizontally)===e.horizontally&&(r.width=i.width+"px",r.paddingRight=i.paddingRight+"px",r.paddingLeft=i.paddingLeft+"px")},i,r,u,f||function(t){return n.Effects.Easing.Exponential.ease_in_out(t,4)}),c.get_animations().push(new n.Effects.Animation({startTime:0,elements:this,animate:function(n){n.style.overflow="hidden"}}),new n.Effects.Animation({startTime:c.get_duration(),elements:this,animate:function(n){n.style.display="none"}})),c.begin(),this};n.ext.unveil=function(t,i,r,u,f){function c(t,i){var r=t._$gimme$_veil;return r||(r=r||function(){var i=t.cloneNode(!0),r,u,f;return i.style.cssText="position:absolute;top:0;left:0;visibility:hidden;margin:0;padding:0;border:0;height:;width:;",i.style.display="block",t.parentNode.appendChild(i),i=n(i),r=parseInt(n(t).get_style("height"),10)||parseInt(i.get_style("height"),10),u=parseInt(n(t).get_style("width"),10)||parseInt(i.get_style("width"),10),i[0].style.padding=t.style.padding,f={height:r,width:u,paddingTop:parseInt(i.get_style("paddingTop"),10),paddingBottom:parseInt(i.get_style("paddingBottom"),10),paddingRight:parseInt(i.get_style("paddingRight"),10),paddingLeft:parseInt(i.get_style("paddingLeft"),10)},t.parentNode.removeChild(i[0]),t.style.overflow="hidden",f}()),r[i]}function l(){return document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled}var e=n.Effects.Enums.Directions,o,s,h;return t=Math.floor(t)||e[t]||e.vertically,e=n.Effects.Enums.Directions,t=Math.floor(t)||e[t]||e.vertically,o={},s={},(t&e.vertically)===e.vertically&&(s.height=s.paddingTop=s.paddingBottom=0,o.height=o.paddingTop=o.paddingBottom=c),(t&e.horizontally)===e.horizontally&&(s.width=s.paddingLeft=s.paddingRight=0,o.width=o.paddingLeft=o.paddingRight=c),h=n.Effects.Storyboard.create(this.filter(function(t){var i=t.style.display||n(t).get_style("display");return i==="none"||i===null}),s,o,function(n,i){(t&e.vertically)===e.vertically&&(n.style.height=i.height+"px",n.style.paddingTop=i.paddingTop+"px",n.style.paddingBottom=i.paddingBottom+"px");(t&e.horizontally)===e.horizontally&&(n.style.width=i.width+"px",n.style.paddingRight=i.paddingRight+"px",n.style.paddingLeft=i.paddingLeft+"px")},i,r,u,f||function(t){return n.Effects.Easing.Exponential.ease_in_out(t,4)}),h.get_animations().push(new n.Effects.Animation({startTime:0,elements:this,animate:function(n){n.style.overflow="hidden";n.style.display="block"}}),new n.Effects.Animation({startTime:h.get_duration(),elements:this,animate:function(n){n.style.overflow=""}})),n.ext.exit_full_screen=function(){l()&&(document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.exitFullscreen())},n.ext.set_full_screen=function(n){n&&l()&&(n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.requestFullscreen())},h.begin(),this};n.toString=function(){return"Gimme v2.7.0 (Edmund) :: Thursday, June 28, 2012 3:44:28 PM"},function(){function e(t){return n.Effects.Easing.Exponential.ease_in_out(t,4)}function s(){return!!(document.fullscreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled)}var i=n.ext,f=300,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=new RegExp("/[^A-Za-z0-9+/=]","g"),r=64,c=63,u=n.Internals;i.append=function(t){var r=this,i=this[0];return i&&n(t).for_each(function(n){var t=n.parentNode;t!==i&&(n.getRootElement?(n=n.getRootElement(),r.append(n)):i.appendChild(n))}),this};i.insertBefore=function(t,i){var r=this[0];return i.length&&(i=i[0]),r&&n(t).for_each(function(n){r.insertBefore(n,i)}),this};i.appendTo=function(t){return t=n(t)[0],t&&this.for_each(function(n){n.parentNode!==t&&t.appendChild(n)}),this};i.getParent=i.parent;i.appendText=function(n){return this.for_each(function(t){t.appendChild(document.createTextNode(n))}),this};i.appendHTML=function(n){return this.for_each(function(t){sj_appHTML(t,n)}),this};i.fadeIn=function(t,i,r,u){function h(){r&&r()}var o=this[0],s;return t=n(t),s=t.get_style("opacity")||1,t.set_style({opacity:0}),u?o.insertBefore(t[0],o.firstChild):t.appendTo(o),t.fade_in(0,s,i||f,null,h,e),this};i.fadeOut=function(n,t,i){var r=this,u=this.get_style("opacity")||1,o=function(){n&&r.removeFromParent();i&&i()};return this.fade_out(u,0,t||f,null,o,e),this};i.fadeToChild=function(t,i,r){function l(){t.set_style({zIndex:h});o.removeFromParent();r&&r()}var s=this[0],u;t=n(t);u=t.get_style("opacity")||1;t.set_style({opacity:0}).appendTo(s);var h=t.get_style("zIndex")||0,c=this.select(">*").set_style({position:"absolute",top:0,left:0,zIndex:0}),o=c.filter(function(n){return t.index_of(n)===-1});return o.length?t.fade_in(0,u,i||f,null,l,e):t.set_style({opacity:1}),this};i.removeFromParent=function(){return this.for_each(function(n){n.parentNode&&n.parentNode.removeChild(n)}),this};i.get_size=function(){return new at(this[0].clientWidth,this[0].clientHeight)};i.clear=function(){return this.for_each(o.clearElement),this};i.set_text=function(n){return this.clear(),this.for_each(function(t){t.appendChild(document.createTextNode(n))}),this};i.getOpacity=function(){return parseFloat(this.get_style("opacity"))};i.fireEvent=function(n){return this.for_each(function(t){var r,i;document.createEventObject?(r=document.createEventObject(),t.fireEvent("on"+n,r)):(i=document.createEvent("HTMLEvents"),i.initEvent(n,!0,!0),t.dispatchEvent(i))}),this};i.inlineDataSvgs=function(){var i=/^(?:url\(['"]?)?data:(.+);base64,([^'")]+)(?:['"]?\))?$/,r=/^(?:url\(['"]?)?data:(.+),(%3Csvg.*?svg%3E)(?:['"]?\))?$/,u=new DOMParser,t=this;return t.iterate(function(f){var e=t[f],k=e.children&&e.children.length||e.textContent&&e.textContent.trim(),p,o,c,b,l,a;if(!k){var w=n(e).get_style("background-image"),v=w.match(i),y=w.match(r),h,s;if(v?(h=v[1],s=atob(v[2])):y&&(h=y[1],s=decodeURIComponent(y[2])),h==="image/svg+xml"&&s&&s.indexOf("svg")>0)try{if(p=u.parseFromString(s,h),o=p&&p.documentElement,!o||o.tagName!=="svg")return;for(c=e.attributes,b=c&&c.length,l=0;l<b;l++)a=c[l],a.value&&o.setAttribute(a.name,a.value);o.setAttribute("focusable","false");o.style.backgroundImage="none";e.parentNode.replaceChild(o,e);t[f]=o}catch(d){}}}),this};i.remove_attr=function(n){return this.for_each(function(t){t.removeAttribute(n)}),this};i.is_element_inView=function(n,t){var i=this[0].getBoundingClientRect(),r=n?n:0,u=t?t:0;return i.top-r>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)-u&&i.right<=(window.innerWidth||document.documentElement.clientWidth)};i.exit_full_screen=function(){s()&&(document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.exitFullscreen())};i.set_full_screen=function(n){n&&s()&&(n.webkitRequestFullScreen?n.webkitRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.requestFullscreen())};u.base64Encode=function(n){if(!n||n.length===0)return n;for(var s=n.length,h=s%3,l=s-h,i="",f,e,o,u=0;u<l;u+=3)f=n.charCodeAt(u),e=n.charCodeAt(u+1),o=n.charCodeAt(u+2),i+=t.charAt((f&252)>>2),i+=t.charAt((f&3)<<4|(e&240)>>4),i+=t.charAt((e&15)<<2|(o&192)>>6),i+=t.charAt(o&c);u=l;f=n.charCodeAt(u);e=n.charCodeAt(u+1);switch(h){case 1:i+=t.charAt((f&252)>>2);i+=t.charAt((f&3)<<4);i+=t.charAt(r);i+=t.charAt(r);break;case 2:i+=t.charAt((f&252)>>2);i+=t.charAt((f&3)<<4|(e&240)>>4);i+=t.charAt((e&15)<<2);i+=t.charAt(r)}return i};u.base64Decode=function(n){var c,l,u,i,s,e,f,o;if(!n||n.length===0)return n;if(c=n.length,c%4!=0||h.exec(n))throw new Error("Not a valid base64 encoded string");for(l=c-4,u="",i=0;i<l;i+=4)s=n.charAt(i),e=n.charAt(i+1),f=n.charAt(i+2),o=n.charAt(i+3),u+=String.fromCharCode(t.indexOf(s)<<2|t.indexOf(e)>>4),u+=String.fromCharCode((t.indexOf(e)&15)<<4|t.indexOf(f)>>2),u+=String.fromCharCode((t.indexOf(f)&3)<<6|t.indexOf(o));return i=l,s=n.charAt(i),e=n.charAt(i+1),f=n.charAt(i+2),o=n.charAt(i+3),u+=String.fromCharCode(t.indexOf(s)<<2|t.indexOf(e)>>4),t.indexOf(f)!==r&&(u+=String.fromCharCode((t.indexOf(e)&15)<<4|t.indexOf(f)>>2)),t.indexOf(o)!==r&&(u+=String.fromCharCode((t.indexOf(f)&3)<<6|t.indexOf(o))),u};u.isTouchDevice=function(){var n=window.navigator&&(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)||window.PointerEvent,t=n&&window.MSGesture;return"ontouchstart"in window||t||window.DocumentTouch&&document instanceof DocumentTouch};u.HTMLEncode=function(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}(),function(){function l(n,t,r){for(var f,k,l={},v={},p=[],d={},o=0,h=0,g=t.length;h<g;h++){var u=t[h],c=u.property,w=u.from,e=u.duration,b=u.delay||0;e===undefined&&(e=s);w&&(l[c]=w);v[c]=u.to;a(p,d,c,e,b,u.ease);o=Math.max(o,e+b)}f={};f[i]=p.join(",");n.set_style(l);n.get_native_prop("offsetHeight");k=function(){f[i]="";n.set_style(f);r&&r()};n.set_style(f).set_style(v);y.setTimeout(k,o)}function a(n,i,e,s,c,l){if(!i[e]){typeof l=="undefined"&&(l=h);l in u&&(l=u[l]);e=o(r(e,t));var a=e+" "+f(s,"ms")+" "+l;c>0&&(a=a+" "+f(c,"ms"));i[e]=!0;n.push(a)}}function f(n,t){return(typeof n!="string"||n.match(/^[-.0-9]+$/))&&(n=""+n+t),n}function v(t,i){n(t).set_style(i)}function p(t,i,r){for(var h,c,w,b,l=[],e=0,o=0,k=i.length;o<k;o++){var u=i[o],a=u.delay||0,y=u.duration||0,s=u.property,f=u.from,p=u.to;(f===undefined&&(f=t.get_style(s)),typeof f=="number"&&typeof p=="number")&&(h={},h[s]=f,c={},c[s]=p,w=new n.Effects.Animation({elements:t,duration:y,startTime:a,from:h,to:c,animate:v,easing:null}),l.push(w),e=Math.max(e,a+y))}b=new n.Effects.Storyboard({duration:e,completed:r,animations:l});b.begin()}var e=n.Transition=n.Transition||{},r=n.Style.get_camelized_style_name,o=n.Style.get_dasherized_style_name,s=500,u={"default":"ease",line:"linear","in":"ease-in",out:"ease-out","in-out":"ease-in-out","in-sine":"cubic-bezier(0.47,0,0.745,0.715)","out-sine":"cubic-bezier(0.39,0.575,0.565,1)","in-out-sine":"cubic-bezier(0.445,0.05,0.55,0.95)","in-quad":"cubic-bezier(0.55,0.085,0.68,0.53)","out-quad":"cubic-bezier(0.25,0.46,0.45,0.94)","in-out-quad":"cubic-bezier(0.455,0.03,0.515,0.955)","in-cubic":"cubic-bezier(0.55,0.055,0.675,0.19)","out-cubic":"cubic-bezier(0.215,0.61,0.355,1)","in-out-cubic":"cubic-bezier(0.645,0.045,0.355,1)","in-quart":"cubic-bezier(0.895,0.03,0.685,0.22)","out-quart":"cubic-bezier(0.165,0.84,0.44,1)","in-out-quart":"cubic-bezier(0.77,0,0.175,1)","in-back":"cubic-bezier(0.6,-0.28,0.735,0.045)","out-back":"cubic-bezier(0.175,0.885,0.32,1.275)","in-out-back":"cubic-bezier(0.68,-0.55,0.265,1.55)"},h="ease",t=document.createElement("div"),i=r("transition",t),c=t.style[i]!==undefined;e.run=function(n,t,i){if(!n||!n.length||!t||!t.length){i&&i();return}c?l(n,t,i):p(n,t,i)}}(),function(){}(ii||(ii={})),function(n){function r(n){i=w._createElement("div").set_attr("id","testHook").appendTo(n);t=w._createElement("div").set_attr("id","debugHook").appendTo(n)}var u=window,t,i;n.setTestHook=r}(ut||(ut={}));ri=function(){function t(t,i){i===void 0&&(i=1e3);this._interval=i;this._elements=t;this._window=n(window);this.resize=new d;this.startMonitoring()}return t.prototype.getSize=function(){var n=this._elements[0];return new at(n.offsetWidth,n.offsetHeight)},t.prototype.getSizes=function(){var n=[];return this._elements.for_each(function(t){return n.push(new at(t.offsetWidth,t.offsetHeight))}),n},t.prototype.startMonitoring=function(n){var t=this;n&&(this._lastSizes=this.getSizes());this._pollSizeHandler||(this._pollSizeHandler=function(){return t.pollSize()},s.useResizeObserver&&typeof ResizeObserver!="undefined"?(this._resizeObserver=new ResizeObserver(this._pollSizeHandler),this._elements.for_each(function(n){t._resizeObserver.observe(n)})):(!this._intervalId&&this._interval>0&&(this._intervalId=y.setInterval(this._pollSizeHandler,this._interval)),this._window.add_event("resize",this._pollSizeHandler)))},t.prototype.stopMonitoring=function(){this._pollSizeHandler&&(this._window.remove_event("resize",this._pollSizeHandler),this._pollSizeHandler=null);this._resizeObserver&&this._resizeObserver.disconnect();this._intervalId&&(window.clearInterval(this._intervalId),this._intervalId=null)},t.prototype.dispose=function(){this.stopMonitoring();this._elements&&this._elements.clear();this._window&&this._window.clear()},t.prototype.pollSize=function(){var i=this._lastSizes,t=this.getSizes(),r=!1,n,u;if(i&&i.length===t.length){for(n=0,u=i.length;n<u;n++)if(i[n].width!==t[n].width&&t[n].width>0||i[n].height!==t[n].height&&t[n].height>0){r=!0;break}}else r=!0;r&&(this._lastSizes=t,this.resize.invoke(t))},t}(),function(n){function t(n){var t=n;return!!(t&&t.clickable)}function i(n){var i="",t=n;return t&&(t.getPrimaryLabelText?i=t.getPrimaryLabelText():t.name?i=t.name:t.getName?i=t.getName():t.title?i=t.title:t.getTitle&&(i=t.getTitle())),i}function r(n){var i="",t=n;return t.getSecondaryLabelText?i=t.getSecondaryLabelText():t.subtitle?i=t.subtitle:t.getSubtitle&&(i=t.getSubtitle()),i}function u(n){var i=!1,t=n;return typeof t.independentHotRegions!="undefined"?i=t.independentHotRegions:t.getIndependentHotRegions&&(i=t.getIndependentHotRegions()),i}function f(n){var i="",t=n;return t&&(t.getIconText?i=t.getIconText():t.iconText&&(i=t.iconText)),i}function e(n){var t,i=n;return i&&(t=i.badgeType),t||0}function o(n,t){var r=n,i=r&&(r.ypid||r.businesslistingid||n.id);return t&&i&&i.indexOf(":")>-1&&(i=i.split(":")[1]),i}function s(n){var t=n;return t&&t.tj}function h(n){var t=n;return t&&t.representsTransitStop}function c(n){return n&&n.poiType===5}function l(n){var t=n&&n.poiType;return t!==null&&t!==void 0?t:1}function a(n){var i=null,f,u=n&&n.taskDisplayState;if(u){var r=u.prominence,t=n.viewState,e=u.cardTitleHoveringState===1;if(t===7||typeof r=="undefined")return null;if(e)i=t===4?4:2;else if(t===4||n.alwaysShowOnMap)i=r===1?4:6;else if(t===3||t===2||!t){if(r===1)i=2;else if(r===2)i=5;else return null;f=t===3}}return f?bt.stackRetiredHovered&&i===5?7:3:i}n.getClickable=t;n.getDisplayName=i;n.getSecondaryDisplayName=r;n.independentHotRegions=u;n.getIconText=f;n.getBadgeType=e;n.getYpid=o;n.getTransitJson=s;n.isTransitEntity=h;n.isLandmarkEntity=c;n.getPoiType=l;n.getPoiState=a}(yt||(yt={})),function(t){function v(t){var i=document.createElement(t);return n(i)}function p(t,i,r){var u,f,e;return r=r||{},u=new d,f=function(n){var i,c,l;if(r.preventDefault&&n.preventDefault(),r.stopPropagation&&n.stopPropagation(),i={},typeof n.pageX=="number"){var f=t.get_absolute_pos(),e=t[0],o=1,h=1;s.isJSEventScaleAware&&f.width&&f.height&&(o=e.offsetWidth/f.width,h=e.offsetHeight/f.height);c=(n.pageX-f.x)*o;l=(n.pageY-f.y)*h;i.point={x:c,y:l}}typeof n.wheelDelta=="number"?i.wheelDelta=n.wheelDelta/120:typeof n.detail=="number"&&(i.wheelDelta=-n.detail);typeof n.keyCode=="number"&&(i.keyCode=n.keyCode);i.target=n.target;r.argBuilder&&r.argBuilder(i,n);u.invoke(i)},t.add_event(i,f),e="jsEvent"+i+"_"+n.Helper.get_guid(f),t[0]&&(t[0][e]=f),u.id=e,u}function w(t){if(t.length>0){var i=n(t[t.length-1]).select(".bm_dropdownEntry");i&&i.length>0&&i[0].focus()}}function b(){var n=s.features.taskFramework;return n&&n.enableBoldUXChanges&&f}function k(n){f=n}function g(){var t=n(".MicrosoftMap .taskBar");return t.length>0?t.get_size().height:0}function u(n,t){var i,r,u;if(n&&t&&(i=n.split("."),i&&i.length))for(r=0,u=i.length;r<u;r++)if(i[r]&&t.indexOf(i[r].toLowerCase())>-1)return!0;return!1}function e(n){return u(n,["house"])}function h(n){return u(n,["91572","13344","30646","30697","hotel","vacationrental"])}function nt(n){return u(n,["attraction","90012","35623","34187"])}function c(n){return u(n,["90287","90232","91649","30949","30359","restaurant","food & drink","food & dining"])}function a(n){return u(n,["zipcode","ZipCode"])}function tt(){var t,u,i;return typeof r=="undefined"&&(t=s.features.taskFramework,r=t&&t.enableBoldUXChanges?!0:t&&n("body")[0].clientWidth>=t.slideoutMinWidth,u={logData:{feature:"TM",action:"A",data:{isSlideEnabled:r}},impressionGuid:s.dynamicProperties.mapsIG},i=Microsoft&&Microsoft.Maps&&Microsoft.Maps.GlobalDataEventHandler,i&&y.setTimeout(function(){i.invokeHandler("data-instrumentation",u)},2e3)),r}function it(){return t._isLocalOverlayShownOnSerp()||t._isRealEstateOverlayShownOnSerp()}function rt(){return l("travelOverlayOnSerp")}function ft(){return l("localOverlayOnSerp")}function et(){return l("realEstateOverlayOnSerp")}function l(n){var t=s.dynamicProperties;return t?s.isMapsAnswer&&t[n]&&t[n].visible:!1}function ot(t){y.setTimeout(function(){var r=n(document).select("[data-subtaskid='".concat(t,"']")),i=r&&r.select(".menu");i.length>0&&(i[1]?i[1].click():i[0].click(),y.setTimeout(function(){var t=n(".menuPrintItem",r[0]);t.length>0&&t[0].parentElement.focus()},150))},200)}function st(n,t){return n/=t?1e3:1609.34,o._formatDistanceString(n,t)}function ht(t,i,r){var u=t,o=s.features.localSearch,f;return i&&(f=i.searchQueryCategory||i.selectedCategoryId||i.category,t==="LocalListingTask"?(o.enableCustomHotelsExperience&&h(f)?u="HotelsListingTask":e(f)?u="HouseListingTask":o.enableCustomRestaurantsExperience&&c(f)?u="RestaurantsListingTask":a(f)?u="PolygonListingTask":o.enableTopicSearchExperience&&f==="topicSearch"&&(u="TopicSearchLandingTask"),i.activatingElement=r&&n(r)):t==="LocalDetailsTask"&&(o.enableCustomHotelsExperience&&h(f)?u="HotelsDetailsTask":e(f)?u="HouseDetailsTask":o.enableCustomRestaurantsExperience&&c(f)&&(u="RestaurantDetailsTask"),i.activatingElement=r&&n(r))),u}function ct(n,t){n&&t&&t.adProviderId&&(n.adBusinessLocationId=t.adBusinessLocationId,n.adImpressionGuid=t.adImpressionGuid,n.adProviderId=t.adProviderId,n.adQuery=t.adQuery,n.adRetailEntitySource=t.adRetailEntitySource,n.adStoreId=t.adStoreId,n.adTriggerType=t.adTriggerType,n.adYpid=t.adYpid)}function lt(){var t=n(".bm_newSidebar");return t.length===0?0:t.get_size().width+1}function at(n){if(n){var t=n.getForegroundTask(),i=n.getFirstTask();return r&&t&&i&&t!==i&&t.displayState.activationState===1&&i.displayState.activationState===2&&t.displayState.stackOrder===2&&i.displayState.stackOrder===1}return!1}function i(n,t){var i=document.createElement(n);return i.className=t,i}function vt(n){o._isFeatureEnabled("localGuide")&&sj_evt.fire("showWelcome",n)}function yt(t,i){var r=t.changed.add(function(t){var u;if(t&&t.name==="percentLoaded"&&t.newValue===1&&(r.dispose(),u=n("div[data-subtaskid="+i+"]"),u.length>0)){var f=u[0],s=n(".bm_itinDestinations",f),e="itin";s.get_style("display").indexOf("none")>-1&&(e="");var h=n(".bm_cardClose",f),o=n(".bm_ItinBack",f),c=o?o.get_style("display"):"";h.add_class(!o||c.indexOf("none")>-1?e:e+" back")}})}function pt(n,t){var u,i,r;if(!n||!t)return!1;if(n===t)return!0;for(u=t.children,i=!1,r=0;!i&&r<u.length;r++)i=this.isChildElement(n,u[r]);return i}function wt(n,i){i===void 0&&(i=25);var r={top:n.pageY-i},u=n.pageX;return o._isRtl()&&_w&&_w.innerWidth?r.right=_w.innerWidth-u:r.left=u,t._createElement("div").add_class("bm_listMenu").set_style(r)}function bt(n){var s="bm_cardWrapper",t,r,u,f,e,o,h;return n&&(s+=" "+n),t=i("div",s),r=i("div","panelWrapper left Light"),t.appendChild(r),u=i("div","panelContent"),r.appendChild(u),f=i("div","taskCard focus"),u.appendChild(f),e=i("div","cardFace"),f.appendChild(e),o=i("div","cardContent"),e.appendChild(o),h=i("div","contentRoot"),o.appendChild(h),t}function kt(t){try{var i=new DOMParser;return n(i.parseFromString("<div>"+t+"<\/div>","text/html").firstChild.childNodes[1].firstChild)}catch(r){return ut.assert(!1,"Error parsing the response: "+r),null}}function dt(){var n=s.features.sharing;return n&&n.disableLoadingRUBRegion}function gt(n,t){var i=s.features.sharing,f,r,h;if(i&&i.disableSharingLargeBoundingBox&&i.disableSharingBoundingBoxes&&i.disableSharingBoundingBoxes.length>0){var e=atlas.data.Position.fromLatLng(t,n),u=i.disableSharingLargeBoundingBox,c=atlas.data.BoundingBox.fromEdges(u.west,u.south,u.east,u.north),o=i.disableSharingBoundingBoxes;if(!atlas.data.BoundingBox.containsPosition(c,e))return!1;for(f=0;f<o.length;f++)if(r=o[f],h=atlas.data.BoundingBox.fromEdges(r.west,r.south,r.east,r.north),atlas.data.BoundingBox.containsPosition(h,e))return!0}return!1}function ti(){return!window.history.state}function ii(n,t){var i="WFR.Resize";return!n||!n.enableNewWaterfallControlEvents||!t?i:i+"_"+t}function ri(n,t){var f,r,i,u;if(n)for(f=n.substring(1),r=f.split("&"),i=0;i<r.length;i++)if(u=r[i].split("="),decodeURIComponent(u[0])===t)return decodeURIComponent(u[1]);return""}function ui(n){return typeof n=="string"?_ge(n):n}function fi(n){typeof DirectionsControl=="undefined"?ni.resolveBySourceKey("DirectionsControl",n):n()}function ei(){return navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2}var f,r;t._createElement=v;t._defineJSEventForDomEvent=p;t._setFocusOnFirstMenuItem=w;f=!1;t.shouldLeftLaneBeHidden=b;t.setLeftLaneHidden=k;t.getSearchBoxHeaderHeight=g;t._isHouseCategory=e;t._isHotelsCategory=h;t._isAttractionCategory=nt;t._isRestaurantCategory=c;t._isZipCodeCategory=a;t._getIsSlideCardEnabled=tt;t._isLocalOrRealEstateScenarioOverlayShownOnSerp=it;t._isTravelOverlayShownOnSerp=rt;t._isLocalOverlayShownOnSerp=ft;t._isRealEstateOverlayShownOnSerp=et;t._refocusPrintDropDownMenu=ot;t._readableTextFromDistance=st;t._overrideTasktypeBasedOnCategory=ht;t._updateSearchTaskStateWithAdsData=ct;t.getVerticalTaskBarWidth=lt;t.isSlideOutCard=at;t.createElementWithClassName=i;t._showWelcomePane=vt;t.itineraryCloseButtonHandler=yt;t.isChildElement=pt;t._createContextMenuElement=wt;t.buildSkeletonCardContainer=bt;t._tryParsingWithDOMParser=kt;t._shouldDisableLoadingForRUBRegion=dt;t._shouldDisableShareForPoint=gt;t._isBrowserHistoryEmpty=ti;t._getWaterfallResizeEventName=ii;t.getParamFromQueryString=ri;t.getElement=ui;t.checkDirectionsControl=fi;t._isIpadDevice=ei}(w||(w={}));String.prototype.endsWith||(String.prototype.endsWith=function(n,t){return(t===undefined||t>this.length)&&(t=this.length),this.substring(t-n.length,t)===n});String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return(!t||t<0)&&(t=0),this.substring(t,t+n.length)===n});String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.replaceAll||(String.prototype.replaceAll=function(n,t){for(var i=this,r=i.indexOf(n);r!==-1;)i=i.replace(n,t),r=i.indexOf(n);return i}),function(n){function u(n,t){return new atlas.Map(n,t)}function f(n,t){var r=new it.Position(t.longitude,t.latitude),i=n.positionsToPixels([r])[0];return new e(kt.getX(i),kt.getY(i))}function o(n){var t=n.getCamera().center;return new i(t[1],t[0])}function s(n,t){var i=t+"_ds";return n.createDataSource(i)}function h(n,t,i,r){if(!t.layers.getLayerById(i.getId())){var u=void 0;i instanceof v.SymbolLayer?u=w(n,t,i):i instanceof v.ImageLayer||i instanceof v.TileLayer?u=a(t,i):(i instanceof v.LineLayer||i instanceof v.PolygonLayer)&&(u=y(n,t,i));u&&r&&(t.layers.getLayerById(r)?t.layers.move(u.getId(),r):t._getMap().moveLayer(u.getId(),r))}}function c(n){var r=[],u,h,i,f,c,e,a,o,l,s,t;if(n)for(u=0,h=n;u<h.length;u++)if(i=h[u],f=i.geometryType,1===f)c=i.geometry,r.push(new it.Position(c.x,c.y));else if(2===f)for(e=i.geometry,t=0;t<e.x.length;t++)r.push(new it.Position(e.x[t],e.y[t]));else if(3===f)for(a=i.geometry,o=0,l=a.rings;o<l.length;o++)for(s=l[o],t=0;t<s.x.length;t++)r.push(new it.Position(s.x[t],s.y[t]));return r}function l(n,i,r){return r=typeof r=="number"?r:6,n&&i?n===i?!0:it.Position.areEqual(n.center,i.center,r)&&t(n.zoom,i.zoom,r)&&t(n.bearing,i.bearing,r)&&t(n.pitch,i.pitch,r):!n==!i}function a(n,t){var i=t.getOptions(),r;return i.visible&&(r=t instanceof v.ImageLayer?new v.ImageLayer(i):new v.TileLayer(i),n.layers.add(r)),r}function y(n,t,i){var s,e=i.getOptions(),h,y,o,l,a;if(e.visible){delete e.source;var f=i.getSource(),c=f.getId(),u=t.sources.getById(c);if(!u){if(f instanceof atlas.source.VectorTileSource)u=new atlas.source.VectorTileSource(c,f.getOptions());else for(u=new atlas.source.DataSource(c,f.getOptions()),y=r(n.getAzureMap(),f),o=0,l=y;o<l.length;o++)a=l[o],((s=a.getProperties())===null||s===void 0?void 0:s.noPrint)||u.add(a.toJson());t.sources.add(u)}h=i instanceof v.LineLayer?new v.LineLayer(u,i.getId(),e):new v.PolygonLayer(u,i.getId(),e);t.layers.add(h)}return h}function w(n,t,i){var w,s=i.getOptions(),b,u,o,e,ht,h,g,nt,tt,it,c,ut,l,ft,et,a,ct,lt,at,y,ot,st;if(s.visible){delete s.source;var f=s.iconOptions,k={},d="";if(f.image&&(typeof f.image=="string"?k[f.image]=!0:f.image.length===2&&f.image[0]==="get"&&(d=f.image[1])),u=i.getSource(),o=void 0,o=typeof u=="string"?u:u.getId(),e=t.sources.getById(o),typeof u!="string"&&!e&&typeof u.getOptions!="undefined"&&typeof u.getShapes!="undefined"){for(e=new atlas.source.DataSource(o,u.getOptions()),ht=r(n.getAzureMap(),u),h=0,g=ht;h<g.length;h++)(nt=g[h],(w=nt.getProperties())===null||w===void 0?void 0:w.noPrint)||(tt=nt.toJson(),it=d&&tt.properties[d],it&&(k[it]=!0),e.add(tt));t.sources.add(e)}var vt=Object.getOwnPropertyNames(k),rt=t._getMap(),yt=p.getImages(n.getAzureMap());for(c=0,ut=vt;c<ut.length;c++)l=ut[c],rt.hasImage(l)||(ft=yt.getImageRecord(l),ft&&(et=ft.result,rt.addImage(l,et.icon,et.metadata)));for(a=i.getId(),ct=e||o,b=new v.SymbolLayer(ct,a,s),t.layers.add(b),lt=n.getAzureMap()._getMap(),at=["symbol-sort-key","symbol-z-order","text-justify","text-radial-offset","text-variable-anchor","text-padding","icon-padding"],y=0,ot=at;y<ot.length;y++)st=ot[y],rt.setLayoutProperty(a,st,lt.getLayoutProperty(a,st))}return b}function r(n,t){var i=t.getShapes(),r,u,f,e,o,s;if(i=i?i:[],i.length===0&&(r=n._getMap().getSource(t.getId()),r&&r.type==="geojson"&&(u=r._data,u))){f=u.features;for(e in f)o=f[e],s=new atlas.Shape(o),i.push(s)}return i}function t(n,t,i){var r,u;return typeof n=="number"&&typeof t=="number"?(u=Math.pow(10,-i),r=Math.abs(n-t)<u):r=!n==!t,r}n.create=u;n.tryLocationToPoint=f;n.getMapCenter=o;n.createDataSource=s;n.copyMapLayer=h;n.getPositions=c;n.areViewEqual=l}(ft||(ft={}));et=function(){function n(){}return n.prototype.accumulate=function(n,t){for(var r=this._getCorners(t,n),i=0;i<r.length;i++)this._accumulateLocation(r[i].latitude,r[i].longitude)},n.prototype.accumulateLocations=function(n){for(var t=0;t<n.length;t++)this._accumulateLocation(n[t].latitude,n[t].longitude);return this.getBounds()},n.prototype.accumulateLocationRect=function(n){for(var t,i=0;i<n.length;i++)t=n[i],this._accumulateLocation(r.getNorth(t),r.getWest(t)),this._accumulateLocation(r.getSouth(t),r.getEast(t));return this.getBounds()},n.prototype.accumulateLatLon=function(n,t){for(var i=0;i<n.length;i++)this._accumulateLocation(n[i],t[i]);return this.getBounds()},n.prototype.getBounds=function(){var n=this._bounds;return n?r.fromEdges(n[0],n[1],n[2],n[3]):null},n.prototype._getCorners=function(n,t){if(t[0]===t[2]&&t[1]===t[3])return[{latitude:n.toLatitude(t[1],t[0]),longitude:n.toLongitude(t[1],t[0])}];return[{latitude:n.toLatitude(t[3],t[0]),longitude:n.toLongitude(t[3],t[0])},{latitude:n.toLatitude(t[1],t[0]),longitude:n.toLongitude(t[1],t[0])},{latitude:n.toLatitude(t[3],t[2]),longitude:n.toLongitude(t[3],t[2])},{latitude:n.toLatitude(t[1],t[2]),longitude:n.toLongitude(t[1],t[2])}]},n.prototype._accumulateLocation=function(n,t){this._bounds?(this._bounds[0]=Math.max(this._bounds[0],n),this._bounds[1]=Math.min(this._bounds[1],t),this._bounds[2]=Math.min(this._bounds[2],n),this._bounds[3]=Math.max(this._bounds[3],t)):this._bounds=[n,t,n,t]},n}();ui=function(){function n(n,t){this.primitive=n;t.position&&(this.location=new i(t.position[1],t.position[0]));this.pixel=t.pixel;this.sourceArgs=t}return n}(),function(n){function i(n,t,i,r){var e=i-n,u,f;return e!==0?(u=(r-t)/(i-n),f=t-u*n,[u,f]):null}function r(t){return t*n.degreesPerRadian}function u(t){while(t<0)t+=n.twoPI;while(t>=n.twoPI)t-=n.twoPI;return t}function f(n){return(360+n)%360}function o(n,t,i){var r=Math.cos(i),u=Math.sin(i);return new e(n*r-t*u,n*u+t*r)}function s(n,t){var i=Math.sin(n)*t,r=Math.cos(n)*t;return new e(i,r)}function h(n,t){var i=n*Math.cos(t),r=n*Math.sin(t);return new e(i,r)}function c(n){return Math.atan2(n.y,n.x)}function l(n,t){return Math.atan2(t.y-n.y,t.x-n.x)}function a(n){return Math.sqrt(n.x*n.x+n.y*n.y)}function v(n,t){var i=(n.x+t.x)/2,r=(n.y+t.y)/2;return new e(i,r)}function y(n,t){var i=n.x+t.x,r=n.y+t.y;return new e(i,r)}function p(n,t){var i=n.x-t.x,r=n.y-t.y;return new e(i,r)}function w(n,t){var i=t.x-n.x,r=t.y-n.y;return Math.sqrt(i*i+r*r)}function b(n,t,i){var u=i.x-t.x,f=i.y-t.y,s=u*u+f*f,r=((n.x-t.x)*u+(n.y-t.y)*f)/s;r>1?r=1:r<0&&(r=0);var h=t.x+r*u,c=t.y+r*f,e=h-n.x,o=c-n.y;return Math.sqrt(e*e+o*o)}function k(n,t){return t===0?n:t===n?0:n-Math.floor(n/t)*t}function d(n,t){return n.x*t.x+n.y*t.y}function g(n,t){return n.x*t.y-n.y*t.x}function nt(t){var i=n.getMagnitudeOfVector2D(t),r=t.x,u=t.y;return i!==0&&(r/=i,u/=i),new e(r,u)}function tt(t,i){for(var r,u=Number.MAX_VALUE,f=-u,e=0,o=i.length;e<o;e++)r=n.dotProduct2D(t,i[e]),r<u&&(u=r),r>f&&(f=r);return{min:u,max:f}}function it(n,t,i){if(i<=t)throw new Error("invalid argument exception");for(var r=i-t;n<t;)n+=r;while(n>i)n-=r;return n}function rt(n){var t,i,r;if(n&&n.length>0){var u=n[0].x,o=u,f=n[0].y,s=f;for(t=1;t<n.length;t++)i=n[t].x,r=n[t].y,i<u&&(u=i),i>o&&(o=i),r<f&&(f=r),r>s&&(s=r);return new li(new e(u,f),new e(o,s))}return null}function ut(t,i,r){if(!t||!i||!r||e.pointsEqual(t,i)||e.pointsEqual(t,r))return NaN;var u=n.getAngleOfSegment2D(t,i),f=n.getAngleOfSegment2D(t,r);return f-u}function ft(n,t,i,r){var f=i||180,e=r||360,u=Math.abs(n-t);return u>f&&(u=Math.abs(Math.min(n,t)+e-Math.max(n,t))),u}function et(t,i){return n.getAngleDifference(t,i,Math.PI,n.twoPI)}function ot(n,t,i){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))<i}function st(n,t){var i,r,u;if(!n||!t||n[0].length!==t.length)return undefined;var e=n.length,o=t[0].length,f=new Array(e),s=t.length;for(i=0;i<e;i++)for(f[i]=new Array(o),r=0;r<o;r++)for(f[i][r]=0,u=0;u<s;u++)f[i][r]+=n[i][u]*t[u][r];return f}function ht(n,t,i){var r,u;return n&&t&&i?(u=(i.y-n.y)*(t.x-n.x)-(t.y-n.y)*(i.x-n.x),r=u>0?1:u<0?2:0):r=-1,r}function ct(n){var i,r,t;if(!n||n.length<=2)return-1;for(i=0,r=n[n.length-1],t=0;t<n.length;t++)i+=(n[t].x-r.x)*(n[t].y+r.y),r=n[t];return i===0?0:i>0?1:2}function lt(n,i,r,u,f){var o;if(n&&i&&r&&u){var s=i.y-n.y,h=n.x-i.x,c=u.y-r.y,l=r.x-u.x,a=s*l-c*h;if(a===0)o=null;else{var p=s*n.x+h*n.y,w=c*r.x+l*r.y,v=(l*p-h*w)/a,y=(s*w-c*p)/a;o=!f||t(v,n.x,i.x)&&t(y,n.y,i.y)&&t(v,r.x,u.x)&&t(y,r.y,u.y)?new e(v,y):null}}else o=null;return o}function at(n){return new e(-n.y,n.x,n.z)}function vt(i,r,u,f,o){var c=[],a;if(i&&r&&u&&f>0){if(!o&&n.pointInCircle(i,u,f)&&n.pointInCircle(r,u,f))return c;if(a=n.trySolve(i.x,i.y,r.x,r.y),a){var l=a[0],v=a[1],p=f*f,y=v-u.y,w=l*l+1,b=-2*u.x+2*y*l,k=u.x*u.x+y*y-p,s=pt(w,b,k),h=void 0;s.length>0&&(h=s[0]*l+v,(o||t(s[0],i.x,r.x)&&t(h,i.y,r.y))&&c.push(new e(s[0],h)));s.length>1&&(h=s[1]*l+v,(o||t(s[1],i.x,r.x)&&t(h,i.y,r.y))&&c.push(new e(s[1],h)))}else c=wt(i.x,i.y,r.y,u,f,o)}return c}function yt(n){for(var i=0,t=n.length,r;t-->0;)r=n[t]+i,n[t]=r,i=n[t]}function pt(n,t,i){var r=[],u=t*t-4*n*i,o=n*2,f=-t/o,e;return u>0?(e=Math.sqrt(u)/o,r.push(f+e),r.push(f-e)):u===0&&r.push(f),r}function wt(n,i,r,u,f,o){var s=[],h=Math.abs(n-u.x),c=u.y;if(h<f){var l=Math.sqrt(f*f-h*h),a=c+l,v=c-l;(o||t(a,i,r))&&s.push(new e(n,a));(o||t(v,i,r))&&s.push(new e(n,v))}else h===f&&(o||t(c,i,r))&&s.push(new e(n,c));return s}function t(n,t,i){var r=n-t,u=i-n;return r>0&&u>0||r<0&&u<0||r===0||u===0}n.degreesPerRadian=180/Math.PI;n.twoPI=Math.PI*2;n.thirtyDegreesInRadians=Math.PI/6;n.markupVisible=0;n.markupInvisible=255;n.trySolve=i;n.radiansToDegrees=r;n.normalizeRadian=u;n.normalizeDegrees=f;n.rotatePoint=o;n.getPointFromAngleAndRadius=s;n.getVector2DFromMagnitudeAndDirection=h;n.getAngleOfVector2D=c;n.getAngleOfSegment2D=l;n.getMagnitudeOfVector2D=a;n.getMidpoint2D=v;n.getVectorSum2D=y;n.getVectorDifference2D=p;n.getEuclideanDistance2D=w;n.getDistanceFromPointToVector=b;n.mod=k;n.dotProduct2D=d;n.crossProduct2D=g;n.normalizeVector2D=nt;n.projectOntoAxis=tt;n.wrap=it;n.computeBoundingBox=rt;n.getAngleBetween=ut;n.getAngleDifference=ft;n.getAngleDifferenceInRadians=et;n.pointInCircle=ot;n.matrixMultiply=st;n.rotatingDirection=ht;n.polygonRotatingDirection=ct;n.intersect2D=lt;n.perpendicular2D=at;n.intersectLineCircle=vt;n.deltaDecode=yt}(h||(h={})),function(n){function t(n,t,r){if(!n||typeof t=="undefined"||t===null||typeof r=="undefined"||r===null)throw new Error("location, headingInRadians and distanceInMeters must all be defined.");var u=r/6378137,f=h.degreesToRadians(n.latitude),o=h.degreesToRadians(n.longitude),e=Math.asin(Math.sin(f)*Math.cos(u)+Math.cos(f)*Math.sin(u)*Math.cos(t)),s=o+Math.atan2(Math.sin(t)*Math.sin(u)*Math.cos(f),Math.cos(u)-Math.sin(f)*Math.sin(e));return new i(h.radiansToDegrees(e),i.normalizeLongitude(h.radiansToDegrees(s)))}function u(n){return typeof n=="number"&&isFinite(n)}function f(n){return n===-1||n===0}function e(n){var t=lt.convertDistance(n,lt.DistanceUnits.meters,lt.DistanceUnits.nauticalMiles),i=Math.PI/10800*t;return h.radiansToDegrees(i)}function o(n){return Math.sin(h.degreesToRadians(n))*6378137}function s(n){return h.degreesToRadians(n)*6378137}function c(n){return h.radiansToDegrees(Math.asin(n/6378137))}function l(n){return h.radiansToDegrees(n/6378137)}function a(n,t){return h.radiansToDegrees(h.normalizeRadian(Math.atan2(i.normalizeLongitude(t.longitude-n.longitude),t.latitude-n.latitude)))}function v(n){var t=n*Math.PI/180;return 111132.92+-559.82*Math.cos(2*t)+1.175*Math.cos(4*t)+-.0023*Math.cos(6*t)}function y(n){var t=n*Math.PI/180;return 111412.84*Math.cos(t)+-93.5*Math.cos(3*t)+.118*Math.cos(5*t)}function p(n,t){t===void 0&&(t=.1);var i=r.getCenter(n),u=r.getWidth(n)*(1+t),f=r.getHeight(n)*(1+t);return r.fromDimensions(i,u,f)}n.getMapLocationFromLocationHeadingAndDistance=t;n.isValidNumber=u;n.isValidAltitudeReference=f;n.metersToDegrees=e;n.latitudeDegreesToMeters=o;n.longitudeDegreesToMeters=s;n.metersToLatitudeDegrees=c;n.metersToLongitudeDegrees=l;n.getAngleBetweenTwoLocations=a;n.getMetersPerDegreeOfLatitude=v;n.getMetersPerDegreeOfLongitude=y;n.bufferRect=p}(l||(l={}));i=function(){function n(n,t,i,r){var u=typeof n!="number"?parseFloat(n):n,f;if(isNaN(u)||u<-90||u>90)throw Error("Invalid latitude");if(this.latitude=u,f=typeof t!="number"?parseFloat(t):t,isNaN(f))throw Error("Invalid longitude");this.longitude=f;this.altitude=i||0;this.altitudeReference=l.isValidAltitudeReference(r)?r:-1}return n.prototype.getPosition=function(){return[this.longitude,this.latitude]},n.prototype.clone=function(){return n.cloneFrom(this)},n.cloneFrom=function(t){return new n(t.latitude,t.longitude,t.altitude,t.altitudeReference)},n.createFrom=function(t){return t?new n(t[1],t[0]):null},n.prototype.toString=function(){return"[MapLocation ("+this.latitude+", "+this.longitude+")]"},n.normalizeLongitude=function(n){return n<-180||n>180?n-Math.floor((n+180)/360)*360:n},n.areEqual=function(n,t,i,r){return o.areLocationsEqual(n,t,i,r)},n.parseLatLong=function(t){var i,r,u;return t&&(i=t.split(","),i.length===2&&(r=parseFloat(i[0]),u=parseFloat(i[1]),isFinite(r)&&isFinite(u)))?new n(r,u):null},n}();b=function(){function n(){if(n.instance)return n.instance;this.id="LatLon";this.bounds=[90,180,-90,-180]}return n.prototype.toLatitude=function(n,t){return t},n.prototype.toLongitude=function(n){return n},n.prototype.projectToX=function(n,t){return t},n.prototype.projectToY=function(n){return n},n.prototype.getGroundResolution=function(n){var t=rt.fromRegionId(n),u=r.getWidth(t),e=r.getNorthWest(t),o=r.getSouthEast(t),i=atlas.math.getDistanceTo(e,o),f;return u>=360?i=l.C_earthCircumference:u>180&&r.getNorth(t)>0&&r.getSouth(t)<0&&(i=l.C_earthCircumference-i),f=Math.sqrt(n.pixelWidth*n.pixelWidth+n.pixelHeight*n.pixelHeight),i/f},n.instance=new n,n}(),function(n){function c(n,r){if(n<-t||n>t)throw new Error("Please provide the correct latitude in the range of [-90, 90].");r=i.normalizeLongitude(r);var u=o(-t,t,n),e=o(-f,f,r),h=s(u),c=s(e);return h+c}function o(n,t,i){var r=(i-n)/(t-n),u=r*h;return Math.round(u)}function s(n){for(var t="",i=n,o,f;i>0;)o=Math.floor(i%u),i=Math.floor(i/u),t=r[o]+t;for(f=Math.floor(e-t.length);f>0;)t=r[0]+t,f=f-1;return t}var t=90,f=180,r="0123456789bcdfghjkmnpqrstvwxyz",u=r.length,e=6,h=Math.pow(u,e)-1;n.encodeLatLong=c}(ot||(ot={})),function(t){function f(n,t){var e=n.boundingBox;if(e)t||(e=r.fromBoundingBox(e));else{var f=n.crs,h=new i(f.toLatitude(n.bounds[3],n.bounds[0]),f.toLongitude(n.bounds[3],n.bounds[0])),c=new i(f.toLatitude(n.bounds[1],n.bounds[0]),f.toLongitude(n.bounds[1],n.bounds[0])),l=new i(f.toLatitude(n.bounds[1],n.bounds[2]),f.toLongitude(n.bounds[1],n.bounds[2])),a=new i(f.toLatitude(n.bounds[3],n.bounds[2]),f.toLongitude(n.bounds[3],n.bounds[2])),o=h,s=l;if(n.crs&&n.crs.heading)switch(n.crs.heading){case 90:o=a;s=c;break;case 180:o=l;s=h;break;case 270:o=c;s=a}e=u(o,s);n.boundingBox=e}return e}function u(n,t){return r.fromEdges(n.longitude,t.latitude,t.longitude,n.latitude)}function e(t,i){var f=r.getWidth(i),o=r.getWest(i),s=r.getEast(i),u=atlas.math.getDistanceTo([o,0],[s,0]),e;return f>=360?u=l.C_earthCircumference:f>180&&(u=l.C_earthCircumference-u),e=n(t.getMapContainer()).get_size().width,u/e}function s(){for(var c,b,p,k,d=[],a=0;a<arguments.length;a++)d[a]=arguments[a];c=o._isArray(arguments[0])?arguments[0]:arguments;c=c||[];for(var v,y,u,f,g,nt,e,n=c.length,t=new Array(n),s=0,l,h,w;n--;)e=c[n],h=e.latitude,w=e.longitude,isFinite(h)&&isFinite(w)&&(v=v===undefined?h:Math.max(v,h),y=y===undefined?h:Math.min(y,h),t[s++]=l=i.normalizeLongitude(w),f=f===undefined?l:Math.max(f,l),u=u===undefined?l:Math.min(u,l),e.altitudeReference!==-1&&(g=e.altitude,nt=e.altitudeReference));if(s&&f-u>180){for(t.length=s,t.sort(function(n,t){return n-t}),b=t[0]+360-t[s-1],p=0,n=1;n<s;n++)k=t[n]-t[n-1],k>b&&(b=k,p=n);u=t[p];f=t[(p||s)-1]}return r.fromEdges(u,y,f,v)}function h(n,t,u){var f=!1;if(n&&t){var e=i.createFrom(r.getNorthWest(n)),o=i.createFrom(r.getSouthEast(n)),s=i.createFrom(r.getNorthWest(t)),h=i.createFrom(r.getSouthEast(t));f=i.areEqual(e,s,!0,u)&&i.areEqual(o,h,!0,u)}return f}t.fromRegionId=f;t.fromCorners=u;t.getScale=e;t.fromLocations=s;t.areEqual=h}(rt||(rt={})),function(n){n[n.topLeft=0]="topLeft";n[n.TopLeft=0]="TopLeft";n[n.bottomLeft=1]="bottomLeft";n[n.BottomLeft=1]="BottomLeft";n[n.topRight=2]="topRight";n[n.TopRight=2]="TopRight";n[n.bottomRight=3]="bottomRight";n[n.BottomRight=3]="BottomRight";n[n.none=4]="none";n[n.None=4]="None"}(pt||(pt={}));var bi=function(i){function r(r,u,f){var e=i.call(this)||this,a,v,h,l,y,b,g;return e._paddingLeft=0,e._lgPrimerDiv=document.querySelector("div.nonajaxLGCardPrimer"),e._disposables=[e.onTransformRequest=new d,e.onLocateMeEventSuccess=new d,e.controlsLoaded=new d],e._container=r,e._historyManagerReady=new yi,e._overlayCollection=new pi,e.mapContainerElement=w.getElement(u),e.shellContainerElement=w.getElement(f),e._taskLayoutEle=n("[".concat("data-tasklayout","]"),e.shellContainerElement),e._hasLocalGuidePrimer=e._loadLocalGuidePrimer(),e._paddingLeft=gt.contentFirstPadding,e._paddingLeft===0&&!e._hasLocalGuidePrimer&&(c===null||c===void 0?void 0:c.isEnabled)&&(typeof permalinkStates=="undefined"||(permalinkStates===null||permalinkStates===void 0?void 0:permalinkStates.length)===0)&&(a=localStorage===null||localStorage===void 0?void 0:localStorage.getItem("LGPGLYT"),a&&a==="hide"||(v=_w&&_w.innerWidth&&_w.innerWidth>=c.wideWidthThreshold?c.welcomePanelWideWidth:c.welcomePanelWidth,v>0&&(e._paddingLeft=v+32))),e._setRootElementWidth(e._paddingLeft),h=e._map=ft.create(e.mapContainerElement,e._getBootstrapOptions(!1)),l=tt.disableStylePicker?[]:[e._constructStyleControl()],s.trafficStyleMenu2&&(y=new vi(e,{style:s.enableDarkMode?atlas.ControlStyle.dark:atlas.ControlStyle.light}),l.push(y)),b=o.constructCommonControls(!0,!1,"all","list",e),l.push.apply(l,b),e._map.controls.add(l,{position:atlas.ControlPosition.TopRight}),e._disposables.push(h,p.init(h)),k.add(h,"stylechanged",function(){e._adjustShell(null,{left:e._paddingLeft})}),e.viewChangeWatcher=new nr(e),e._initControls(),e._tryLoadStreetsideOrBirdsEye(),e._historyManagerReady.then(function(n){e._historyManager=n}),(s.testHooksEnabled||s.testHooksAllowed)&&(g=function(n){return n.map(function(n){return n.sourcekey})},h.mapFirstIdle.then(function(){t.RequestedBeforePLT=JSON.stringify(g(ni.requested))})),e}return nt(r,i),r.prototype._initControls=function(){var t=this,l=this.getRootElement(),f="overlayContainer",u=this._overlayElement=w._createElement("div").appendTo(l).set_attr("id",f).set_style({position:"absolute",overflow:"hidden",width:"100%",height:"100%",top:"0",left:"0",pointerEvents:"none",transform:"scale(1)"}),e,r,i,h;u.set_style({"z-Index":100});typeof permalinkStates!="undefined"&&(permalinkStates===null||permalinkStates===void 0?void 0:permalinkStates.length)>0&&wi.setStartTime("SearchRequest");e=["BrowserHistoryManager","GlobalDataEventHandler","OverlayManager","TaskBar","TransientLens","TaskManager","MapFeatureHandling"].map(function(n){return{name:n}});r=[];r.push({name:"ControlsContainer"},{name:"MapsFeedback",args:{footerFeedback:n("#sb_feedback"),corpFeedback:n("#fbpgbt")}});(ht===null||ht===void 0?void 0:ht.isEnabled)&&(a===null||a===void 0?void 0:a.isEnabled)&&dt.is3DSupported&&r.push({name:"FlyoverDelegate",args:{AtlasMapControl:this.getAzureMap()}});i=this._container;(ct===null||ct===void 0?void 0:ct.isEnabled)&&(a===null||a===void 0?void 0:a.isEnabled)&&!o._isCommuteDashboardPage()&&dt.is3DSupported&&this._map.mapLoaded.then(function(){i.instanceAsync("Landmarks3DDelegate",function(n){i.instanceAsync("Landmarks3D",null,{landmarks3DDelegate:n});t._disposables.push(n.onViewerOpen.add(function(){return t.handleBHMOperations(n)}),n.onViewerClose.add(function(){return t.handleBHMOperations(n,!1)}))},{AtlasMapControl:t.getAzureMap()})});h=function(r){var b=r.GlobalDataEventHandler,y,h,w,l,o,k,e,d,v,a;b&&b.registerGlobalClickEvent(t);y=r.OverlayManager;y&&u.select("#"+f).length===0&&u.append(y.getRootElement());h=r.BrowserHistoryManager;w=h.getHistoryState();h&&(t._historyManagerReady.resolve(h),h.register("ViewChangeWatcher",t.viewChangeWatcher));l=r.TaskBar;t._taskBar=l;l&&(s.features.autosuggest.focusInSearchBox&&l.setSearchBoxFocus(),l.initializeAutosuggest());o=typeof permalinkStates!="undefined"?permalinkStates:[];k=(o===null||o===void 0?void 0:o.length)>0&&!w;k&&i.instanceAsync("Permalink",function(n){n.processSharedStates(o,t)});e=r.TaskManager;t._taskManager=e;t._autoLG(o,w)?(d=function(){var n=t.createLocalGuideL2TaskState();i.instanceAsync(n?"LocalGuideL2Task":"LocalGuideTask",function(t){e.activateTask(t,n,{activationState:1})})},t._map.mapFirstIdle.then(d)):c.reduceMapResizes?(t._taskManager.IsLocalGuideAutoActivationDisabled()||t.hideLocalGuideIfLaunching3D())&&t._setPaddingAndView(null,0):(t._paddingLeft=0,t._setPaddingAndView(null,1));n(".defaultPrintMessage").swap_class("hidePrintErrorMessage","showPrintErrorMessage");v=n(".printErrorMessage");v&&v.appendText(v.get_attr("data-text"));bt.retireLandmarks&&(a=function(){var n=e.getStacks(),i=n&&n.length>0;p.setLandmarksState(t._map,i?5:2)},t._disposables.push(e.newStackListCreated.add(a),e.stackAdded.add(a),e.stackRemoved.add(a)),a());tt.writeUserLocCookie&&t._map.locateMeEvent.add(function(n){t.handleLocateMeEvent(n)});t.controlsLoaded.invoke()};i.instanceAsyncAll(e,h);r.length&&this._map.mapFirstIdle.then(function(){i.instanceAsyncAll(r,function(n){return t._delayLoadedControlsCallback(n)})});sj_evt.bind("TaskCardRemoving",function(n){return t._reducePaddingBy(n)});sj_evt.bind("OnAllTaskStacksRemoved",function(){return t._map.getIsMapLoaded()&&t.setViewPadding({left:0})})},r.prototype.hideLocalGuideIfLaunching3D=function(){return(a===null||a===void 0?void 0:a.isEnabled)&&(a===null||a===void 0?void 0:a.isLocalGuideHiddenIfLaunching3D)&&!!o._getUrlParam(window.location,"lmk3d",!1)},r.prototype.createLocalGuideL2TaskState=function(){var r=null,n=window.location,t=o._getUrlParam,i,f,e,s;if(n.search.indexOf("l2answer=true")>=0){var h=void 0,u=void 0,c=void 0;(h=t(n,"l2scenario",!1))&&(u=t(n,"l2name",!1))&&(c=t(n,"l2tileid",!1))&&(r={passThruParam:"l2answer=true&l2scenario="+h+"&l2name="+u+"&l2tileid="+c,taskTitle:decodeURIComponent(u.replace(/\+/g," "))})}else i=t(n,"filters"),i&&i.indexOf("ArticleKey:")>=0&&(f=516,e=t(n,"cardWidth"),e&&(s=parseInt(e),isNaN(s)||(f=s)),r={taskTitle:"Article",passThruParam:"filters="+i,cardWidth:f});return r},r.prototype.getStyle=function(){var n=this._map.getStyle().style;return this._streetsideControl&&this._streetsideControl.isActive?n="streetside":this._birdseyeControl&&this._birdseyeControl.isActive&&(n="birdseye"),n},r.prototype.getTaskBar=function(){return this._taskBar},r.prototype.getTaskManager=function(){return this._taskManager},r.prototype.getAffectedPrimitive=function(n){var t=p.getHitTestManager(this._map,p.getLayerManager(this._map)),i=t&&t.getAffectedPrimitive(n),r=i&&i.metadata;return r&&r.sourcePrimitive},r.prototype.getRootElement=function(){return n(this.mapContainerElement)},r.prototype.getCameraForBounds=function(n){return p.ViewHelper.cameraFromBounds(this._map,n)},r.prototype.getView=function(){var n=this._map&&this._map.getCamera(),t;return this.getStyle()==="streetside"?(t=this._streetsideControl.getCamera(),n&&(t.zoom=n.zoom),t):n},r.prototype.setView=function(n,t){this._setPaddingAndView(n,null,t)},r.prototype.setViewPadding=function(n,t,i){this._setPaddingAndView(null,n?n.left:null,t,i)},r.prototype._reducePaddingBy=function(n){this._setPaddingAndView(null,this._paddingLeft-n[1]-32)},r.prototype._setPaddingAndView=function(t,i,r,u){function l(){t?(o.push(k.addOnce(f,"moveend",function(){r&&r()})),f.setCamera(t)):r&&r()}var f=this._map,o=this._disposables,s=n(".overflowTaskPanel"),a=s.length>0?s.get_size().width:0,e=i===null?this._taskLayoutEle.get_size().width-a-12:i;if(e<0&&(e=0),e===this._paddingLeft)l();else{var h=f.getMapSize(),v=h.height/2,p=(h.width+e-this._paddingLeft)/2,w=new atlas.Pixel(p,v),b={center:f.pixelsToPositions([w])[0],type:"jump"},c=function(){y.setTimeout(l,0)},d=function(){u?c():(o.push(k.addOnce(f,"moveend",c)),f.setCamera(b))};o.push(k.addOnce(f,"resize",d));this._setRootElementWidth(e);f.resize();this._paddingLeft=e}},r.prototype.getBounds=function(){return this._map&&this._map.getCamera().bounds},r.prototype.getAzureMap=function(){return this._map},r.prototype.getAzureMapReady=function(){return this._map.mapReady},r.prototype.getAzureMapFirstIdle=function(){return this._map.mapFirstIdle},r.prototype.getOverlays=function(){return this._overlayCollection},r.prototype.getTemplateSelector=function(){return p.getTemplateSelector(this._map)},r.prototype.getSelectedPrimitive=function(){return p.getSelectedPrimitive(this._map)},r.prototype.getMap3DSharedDelegate=function(){var n=this;return this.map3DPromise?this.map3DPromise:(this.map3DPromise=new Promise(function(t,i){n.getContainer().instanceAsync("Map3DSharedDelegate",function(r){n.isDisposed&&(n.map3DPromise=undefined,i());n._container.instanceAsync("Map3DFeedbackHandler",null,{delegate:r});n._disposables.push(r.onOpen.add(function(){n.handleBHMOperations(r)}),r.onClose.add(function(){n.handleBHMOperations(r,!1)}),r.onFeedbackBtnClick.add(function(){n.handleBHMOperations(r,!1)}));t(r)},{AtlasMapControl:n.getAzureMap()})}),this.map3DPromise)},r.prototype.getBirdseyeControl=function(){var n=this;return new Promise(function(t){n._birdseyeControl?t(n._birdseyeControl):n._container.downloadDependencyAsync("Birdseye",function(){var i={birdseyeMetadataUrl:tt.birdseyeV2MetadataUrl,birdseyeTilesUrl:tt.birdseyeTilesUrl},r;i.defaultMapStyle="birdseye";i.supportMapStyles=["birdseye"];i.birdseyeImageryBelowLayer="roads";n._birdseyeControl||n._disposables.push(n._birdseyeControl=new atlas.control.BirdseyeControl(n._map,i));r=n._map.controls.getControls().filter(function(n){return n._setBirdseyeControl});r.length===1&&r[0]._setBirdseyeControl(n._birdseyeControl);t(n._birdseyeControl)})})},r.prototype.getStreetsideControl=function(){var n=this;return this._streetsidePrimise||(this._streetsidePrimise=new Promise(function(t){var i=n._streetsideControl;i?t(i):n._container.downloadDependencyAsync("Streetside",function(){i||n._disposables.push(i=n._streetsideControl=new f.StreetsideControl(n,n._historyManagerReady,{showCurrentAddress:!0,overviewMapMode:"minimized"}));n._disposables.push(i.onActivate.add(function(){ci.log("MapMode","MapTypeChanged",n._map.getCamera(),"streetside");n._adjustShell(!0)}),i.onExit.add(function(){return n._adjustShell(!1)}));t(i)})})),this._streetsidePrimise},r.prototype.tryDeactivateStreetside=function(){this._streetsideControl&&this._streetsideControl.isActive&&(this._streetsideControl.deactivate(),this._taskBar&&this._taskBar.setActionsOptions(4095))},r.prototype.dispose=function(){this.isDisposed||(i.prototype.dispose.call(this),this._overlayElement.clear()&&this._overlayElement.removeFromParent(),o._clearDisposables(this._disposables),o._nullifyClass(this),this.isDisposed=!0)},r.prototype.getContainer=function(){return this._container},r.prototype._delayLoadedControlsCallback=function(n){var f=this,i=n.ControlsContainer,t,r,u,e;i&&(t=n.FlyoverDelegate,r=n.MapsFeedback,t?(u=[],e={name:"Flyover"},u.push(e),this._disposables.push(t.onViewerOpen.add(function(){return f.handleBHMOperations(t)}),t.onViewerClose.add(function(){return f.handleBHMOperations(t,!1)})),this._container.instanceAsyncAll(u,function(n){var t=n.Flyover;t&&i.append(t);i.append(r)})):i.append(r))},r.prototype._getBootstrapOptions=function(n){var f=this,t=s.dynamicProperties,i=gt.loadingView,u,r;return i.zoom&&(i.zoom=i.zoom-1),u=o.getAzureMapStyleFromMapType(t.style),r=st(st({},i),{minZoom:tt.basemapDataMinZoom,style:u,transformRequest:function(n,t){var i={url:n,resourceType:t};return f.onTransformRequest.invoke(i),{url:i.url}}}),(n||t.style!=="x")&&(t.bearing&&(r.bearing=t.bearing),t.pitch&&(r.pitch=t.pitch)),r},r.prototype._tryLoadStreetsideOrBirdsEye=function(){var n=this,i=s.dynamicProperties,t=i.style;(t==="x"||t==="be2")&&this.getAzureMapReady().then(function(){if(t==="x"){var r=n._getBootstrapOptions(!0);n.getStreetsideControl().then(function(n){n.setOptions({overviewMapMode:i.overviewMap?"expanded":"minimized"});n.activate({center:r.center,heading:r.bearing,pitch:r.pitch})})}else n.getBirdseyeControl().then(function(t){t.activate();n.tryDeactivateStreetside()})})},r.prototype._adjustShell=function(t,i){var r=this._taskBar,u,f,e;r&&(u=this._birdseyeControl,f=t||u&&u.isActive,f?r.setActionsOptions(280):r.setActionsOptions(4095));e={display:t?"none":"block"};n("#".concat("taskArea")).set_style(e);this._setPaddingAndView(null,i?i.left:null)},r.prototype._autoLG=function(n,t){var i=this.getStyle();if(this._hasLocalGuidePrimer)return!0;if((!n||n.length===0)&&!t&&(c===null||c===void 0?void 0:c.isEnabled)&&c.showLocalGuideOnLaunch&&i!=="birdseye"&&!this.hideLocalGuideIfLaunching3D()){if((localStorage===null||localStorage===void 0?void 0:localStorage.getItem("LGPGLYT"))!==null)return!this._hasHideLocalGuideSetting();if(!c.enableContentFirstForPermalinks)return!0}return!1},r.prototype._hasHideLocalGuideSetting=function(){var n=localStorage===null||localStorage===void 0?void 0:localStorage.getItem("LGPGLYT");return n&&n==="hide"?!0:!1},r.prototype._setContainerStyle=function(n){this.getRootElement().set_style(n)},r.prototype._setRootElementWidth=function(n){var t,i=n||0,r=(t={width:"calc(100% - ".concat(i,"px)")},t[o._isRtl()?"left":"right"]="0px",t);this._setContainerStyle(r)},r.prototype.handleLocateMeEvent=function(n){if(typeof SHwlochelper!="undefined"&&SHwlochelper&&n&&n.location&&n.location.length>1){var t=this._map.getServiceOptions().sessionId;n.error?n.error===1&&SHwlochelper.writeBlockLocation(t,"maps",function(){},function(){}):SHwlochelper.writeDeviceLocation({coords:{accuracy:n.accuracy,latitude:n.location[1],longitude:n.location[0]}},t,"maps",function(){},function(){})}this.onLocateMeEventSuccess&&this.onLocateMeEventSuccess.invoke(n)},r.prototype._loadLocalGuidePrimer=function(){var n=!1,t;return(c===null||c===void 0?void 0:c.isEnabled)&&(window.history.state||this._lgPrimerDiv&&(t=document.getElementsByClassName("cardPrimer")[0],y.setTimeout(function(){t.style.display="flex"},0),n=!0)),n},r.prototype.handleBHMOperations=function(n,t){var i,r,u,f;t===void 0&&(t=!0);u=n.constructor.name;t?(f={serialize:function(){},deserialize:function(){n.sendCloseEvent&&n.sendCloseEvent()},serializableObjectChanged:new d},(i=this._historyManager)===null||i===void 0?void 0:i.register(u,f),f.serializableObjectChanged.invoke({magnitude:2})):(r=this._historyManager)===null||r===void 0?void 0:r.unregister(u)},r.prototype._constructStyleControl=function(){var t=s.enableDarkMode?atlas.ControlStyle.dark:atlas.ControlStyle.light,n={mapStyles:"all",layout:"list",autoSelectionMode:!1,style:t};return tt.bingStylePicker?new ai(this,n):new gi(this,n)},r}(ti),lu=function(){function n(n,t){this.oldMapTypeId=n;this.newMapTypeId=t}return n}(),au=function(){function n(n,t,i,r,u,f){this._values=[n,t,i,r,u,f]}return n.prototype.invert=function(){var i=this._values,r=i[0],u=i[1],f=i[2],e=i[3],o=i[4],s=i[5],t=r*e-u*f;if(t===0)throw new Error("Determinant is zero");return new n(e/t,-u/t,-f/t,r/t,(f*s-e*o)/t,(u*o-r*s)/t)},n.prototype.multiply=function(t){var i=this._values,r=i[0],u=i[1],f=i[2],e=i[3],v=i[4],y=i[5];i=t.getValues();var o=i[0],s=i[1],h=i[2],c=i[3],l=i[4],a=i[5];return new n(r*o+f*s,u*o+e*s,r*h+f*c,u*h+e*c,v+r*l+f*a,y+u*l+e*a)},n.prototype.transform=function(n){return new e(this.projectX(n.x,n.y),this.projectY(n.x,n.y))},n.prototype.projectX=function(n,t){var i=this._values;return n*i[0]+t*i[2]+i[4]},n.prototype.projectY=function(n,t){var i=this._values;return n*i[1]+t*i[3]+i[5]},n.prototype.scale=function(t,i){var r=this._values;return new n(r[0]*t,r[1]*i,r[2]*t,r[3]*i,r[4]*t,r[5]*i)},n.prototype.translate=function(t,i){var r=this._values;return new n(r[0],r[1],r[2],r[3],r[4]+t,r[5]+i)},n.prototype.rotate=function(t){if(t===0)return this;var i=this._values,r=Math.cos(t),u=Math.sin(t),f=i[0],e=i[2],o=i[4],s=f*r-i[1]*u,h=f*u+i[1]*r,c=e*r-i[3]*u,l=e*u+i[3]*r,a=o*r-i[5]*u,v=o*u+i[5]*r;return new n(s,h,c,l,a,v)},n.prototype.getValues=function(){var n=this._values;return[n[0],n[1],n[2],n[3],n[4],n[5]]},n.prototype.equals=function(n){var i=n&&n.getValues(),t;if(i&&i.length===6){for(t=0;t<6;t++)if(this._values[t]!==i[t])return!1;return!0}return!1},n.prototype.nearlyEquals=function(n,t){var r=n&&n.getValues(),i;if(r&&r.length===6){for(i=0;i<6;i++)if(Math.abs(this._values[i]-r[i])>t)return!1;return!0}return!1},n.prototype.getZoomDirection=function(){var n=this.getValues();return n[0]<.9999||n[3]<.9999?-1:n[0]>1.0001||n[3]>1.0001?1:0},n.identity=new n(1,0,0,1,0,0),n}(),ki=function(n){function t(t,i,r){var u=n.call(this)||this;return u.crs=b.instance,u.geometryType=3,u.setArea(t,r),u.entity=i,u}return nt(t,n),t.fromGeoDataResult=function(n){var u=[],i,r;if(n.Polygons)for(i=0,r=n.Polygons;i<r.length;i++){var e=r[i],f=e.geometry,o={id:n.EntityID,poiType:1};u.push(new t({rings:f.rings,bounds:f.bbox},o,!1))}return u},t.prototype.isTapEnabled=function(){return!0},t.getRings=function(n,t){var e,f,s,u,o,r,h,c,l;if(!n||!t||t.rings.length<1)return null;for(e=[],f=0,s=t.rings.length;f<s;f++){for(u=t.rings[f],o=[],r=0,h=u.x.length;r<h;r++)c=n.toLatitude(u.x[r],u.y[r]),l=n.toLongitude(u.x[r],u.y[r]),o.push(new i(c,i.normalizeLongitude(l)));e.push(o)}return e},t.prototype.getRings=function(){return t.getRings(this.crs,this.geometry)},t.prototype.setRings=function(n,t){this.setArea(n,t)},t.prototype.setArea=function(n,t){var i,f,r,u,e,h,o,c,s,l;if(n.rings)this.geometry=n;else{for(e=n,e[0]instanceof Array||(e=[e]),r=[],i=0,f=e.length;i<f;i++)h=e[i],r.push(this._getRing(h));this.geometry={rings:r,bounds:null}}for(o=this.geometry,r=o.rings,i=0,f=r.length;i<f;i++)u=r[i],this._closeRing(u),u.generalizable=t,c=fi.worldWrapLongitudes(u.x),c&&(o.bounds=null);if(!o.bounds){for(s=new et,i=0,f=r.length;i<f;i++)u=r[i],s.accumulateLatLon(u.y,u.x);l=s.getBounds();o.bounds=o.boundingBox=l}},t.prototype.dispose=function(){this.isDisposed||(o._nullifyClass(this),this.isDisposed=!0)},t.prototype._getRing=function(n){for(var i=[],r=[],t=0;t<n.length;t++)i.push(n[t].longitude),r.push(n[t].latitude);return{x:i,y:r}},t.prototype._closeRing=function(n){var r,t;n&&(n instanceof Array?(r=n,r.length&&(r[0].latitude!==r[r.length-1].latitude||r[0].longitude!==r[r.length-1].longitude)&&r.push(new i(r[0].latitude,r[0].longitude))):(t=n,t.x.length&&t.y.length&&(t.x[0]!==t.x[t.x.length-1]||t.y[0]!==t.y[t.y.length-1])&&(t.x.push(t.x[0]),t.y.push(t.y[0]))))},t}(vt),fi=function(n){function t(t,i,r){var u=n.call(this)||this;return u.crs=b.instance,u.geometryType=2,u.entity=i,u.disposables=[],u.setLine(t,r),u}return nt(t,n),t.getLocations=function(n,t){var u=[],r,f,e;if(n&&t)for(r=0;r<t.x.length;r++)f=n.toLatitude(t.x[r],t.y[r]),e=n.toLongitude(t.x[r],t.y[r]),u.push(new i(f,i.normalizeLongitude(e)));return u},t.prototype.getLocations=function(){return t.getLocations(this.crs,this.geometry)},t.prototype.setLine=function(n,i){var s=new et,r,o;if(n instanceof Array){for(var h=n,u=h.length,f=new Array(u),e=new Array(u);u--;)e[u]=n[u].longitude,f[u]=n[u].latitude;this.geometry={x:e,y:f,bounds:null}}else this.geometry=n;r=this.geometry;o=t.worldWrapLongitudes(r.x);(o||!r.bounds)&&(r.bounds=r.boundingBox=s.accumulateLatLon(r.y,r.x));r.generalizable=i},t.prototype.dispose=function(){this.isDisposed||(o._disposeEvents(this),o._nullifyClass(this),this.isDisposed=!0)},t.worldWrapLongitudes=function(n){var u=!1,r,s,t,e;n=n||[];var o=i.normalizeLongitude(n[0]),f=0,h=n.length>1&&n[0]===n[n.length-1];for(r=0,s=n.length;r<s;r++)t=f+i.normalizeLongitude(n[r]),e=t-o,e>180?(f-=360,t-=360):e<-180&&(f+=360,t+=360),t!==n[r]&&(n[r]=t,u=!0),o=t;return u&&h&&(n[n.length-1]=n[0]),u},t}(vt),di=function(n){function t(t,i,r,u,f){var e=n.call(this)||this;return e.crs=b.instance,e.geometryType=1,e.setLocation(t),e.entity=i,e.anchor=u,e.image=r,e.imageSize=f,e}return nt(t,n),t.getLocation=function(n,t){var r,u,f;return n&&t&&(u=n.toLatitude(t.x,t.y),f=n.toLongitude(t.x,t.y),r=new i(u,f)),r},t.prototype.getLocation=function(){return t.getLocation(this.crs,this.geometry)},t.prototype.isTapEnabled=function(){return!0},t.prototype.setLocation=function(n){this.geometry={x:n.longitude,y:n.latitude,bounds:[n.latitude,n.longitude,n.latitude,n.longitude]}},t.prototype.dispose=function(){this.isDisposed||(o._nullifyClass(this),this.isDisposed=!0)},t}(vt),gi=function(n){function t(t,i){var r=n.call(this,i)||this;return r._onStyleChanged=function(n){r.setSelectedStyle(n.style)},r._mapShell=t,r}return nt(t,n),t.prototype.onAdd=function(t,i){var r=this;return this._azureMap=t,t.mapLoaded.then(function(){r._updateStyleAvailability();r._idleHandler=k.add(t,"idle",function(){return r._updateStyleAvailability()})}),this._styleselectedCallback=function(n){r._onStyleClicked(n)},t.events.add("stylechanged",this._onStyleChanged),t.events.add("styleselected",this,this._styleselectedCallback),n.prototype.onAdd.call(this,t,i)},t.prototype.onRemove=function(){this._idleHandler&&this._idleHandler.dispose();this._azureMap.events.remove("styleselected",this,this._styleselectedCallback);this._azureMap.events.remove("stylechanged",this._onStyleChanged);n.prototype.onRemove.call(this);this._mapShell=null;this._beControl=null;this._ssControl=null},t.prototype._onStyleClicked=function(n){var i=this,t=this._azureMap.getCamera();n==="birdseye"?this._beControl&&this._beControl.isActive||this._isBirdseyeAvailable(t).then(function(n){n&&i._beControl.activate(t.center,t.bearing)}):n==="streetside"?this._ssControl.toggleCoverage():(this._ssControl.toggleCoverage(!1),this._azureMap.getStyle().style!==n&&this._azureMap.setStyle({style:n}))},t.prototype._updateStyleAvailability=function(){var r=this,n=this._azureMap.getCamera(),t,i;this._oldCenter&&this._oldCenter.toString()===n.center.toString()||(this._oldCenter=n.center,t=function(n,t){var i=r.styleButtons[n];t?i===null||i===void 0?void 0:i.classList.remove("disabled"):i===null||i===void 0?void 0:i.classList.add("disabled")},this._isBirdseyeAvailable(n).then(function(n){t("birdseye",n)}),i={bounds:n.bounds},this._isStreetsideAvailable(i).then(function(n){t("streetside",n)}))},t.prototype._isBirdseyeAvailable=function(n){var t=this;return this._beControl?this._beControl.isBirdseyeAvailable(n.center,n.bearing):new Promise(function(i){t._mapShell.getBirdseyeControl().then(function(r){t._beControl=r;r.isBirdseyeAvailable(n.center,n.bearing).then(function(n){i(n)})})})},t.prototype._isStreetsideAvailable=function(n){var t=this;return this._ssControl?this._ssControl.isStreetsideAvailable(n):new Promise(function(i){t._mapShell.getStreetsideControl().then(function(r){t._ssControl=r;r.isStreetsideAvailable(n).then(function(n){i(n)})})})},t}(atlas.control.StyleControl),nr=function(){function n(n){var t=this,i;this.serializableObjectChanged=new d;i=function(){var n=st({},t._azm.getCamera());n.zoom=o.convertZoom(n.zoom,0);t.serializableObjectChanged&&t.serializableObjectChanged.invoke({magnitude:0,cameraView:n})};this._map=n;this._azm=n.getAzureMap();k.add(this._azm,"moveend",i);k.add(this._azm,"stylechanged",i)}return n.prototype.serialize=function(){return null},n.prototype.deserialize=function(){},n.prototype.getLiveUrlParams=function(){var n={},e,h;if(this._azm){var i=o.roundToInterval,t=this._map.getView(),r=this._map.getStyle(),u=t.center[0],f=t.center[1];s.encodeCenterPoint?(e=ot.encodeLatLong(f,u),n.cp=e):n.cp="".concat(i(f,1e-6),"~").concat(i(u,1e-6));h=o.convertZoom(i(t.zoom,.1),0);n.lvl=h.toFixed(1);n.dir=t.bearing?i(t.bearing,.1).toString():"";n.pi=t.pitch?i(t.pitch,.1).toString():"";n.style=r!=="road"?o.getMapTypeFromMapStyle(r):""}return n},n.prototype.getMapState=function(){var n={},r,t;if(this._map){r=this._map.getStyle();t=this._map.getView();n.centerPoint=new i(t.center[1],t.center[0]);n.mode=0;n.style=o.getMapTypeFromMapStyle(r);n.labelVisibility=1;n.level=o.convertZoom(t.zoom,0);n.direction=t.bearing;n.pitch=t.pitch;switch(r){case"streetside":n.mode=2;n.direction=t.heading;break;case"birdseye":n.style="be2";break;case"aerial":n.labelVisibility=0;break;case"hybrid":n.style="a"}}return n},n}(),ei=function(n){function t(t,i,r,u){var f=n.call(this)||this,e=f._privates;return e.defineProperty("overlayElement"),e.defineProperty("alignment"),e.defineProperty("anchor"),e.defineProperty("primitive"),f.setOverlayElement(t),f.setAlignment(i),f.setAnchor(r),u&&f.setPrimitive(u),f}return nt(t,n),t}(ti),wt;(function(t){function f(n,t,i){u||s(n,t.overlayTemplate,i,t)}function e(n,t){if(r&&u&&u===t&&(!t||t===r.getPrimitive())){var i=n.getOverlays();i&&i.indexOf(r)!==-1&&(i.remove(r),r=null,u=null)}}function o(){return r}function s(t,i,f,e){if(i){var s=n(i.applyDataTemplate({primitive:f})),o=typeof e.overlayAlignment=="number"?e.overlayAlignment:h(f);o!==null&&(r=new ei(s,o,e.overlayAnchor,f),u=f,t.getOverlays().insert(r))}}function h(n){var r,t;return n.geometryType===1?(r=n,t=r.geometry,new i(r.crs.toLatitude(t.x,t.y),r.crs.toLongitude(t.x,t.y))):n.geometry.geometryType===1?(t=n.geometry,new i(t.y,t.x)):null}var r,u;t.showOverlay=f;t.hideOverlay=e;t.getOverlay=o})(wt||(wt={}));var oi=function(){function n(n,t,i,r,u,f){var h,e,o,c;r===void 0&&(r=256);u===void 0&&(u=256);f===void 0&&(f=b.instance);h=1<<i;this.x=n;this.y=t;this.zoom=i;this.pixelWidth=r;this.pixelHeight=u;this.crs=f;e=(f.bounds[1]-f.bounds[3])/h;o=(f.bounds[2]-f.bounds[0])/h;this.bounds=[f.bounds[0]+o*t,f.bounds[3]+e*n+e,f.bounds[0]+o*t+o,f.bounds[3]+e*n,];var s="",l=n,a=t;for(c=0;c<i;c++)s=((l&1)+2*(a&1)).toString()+s,l>>=1,a>>=1;this.quadKey=s;this._stringValue=f.id+"PryamidTile"+s}return n.prototype.getParent=function(){var t=null;return this.zoom>1&&(t=new n(Math.floor(this.x/2),Math.floor(this.y/2),this.zoom-1,this.pixelWidth,this.pixelHeight)),t},n.prototype.toString=function(){return this._stringValue},n.fromQuadKey=function(t,i,r,u){var f,o,s;u===void 0&&(u=b.instance);var h=0,c=0,e=t.length;for(f=e;f>0;f--)o=1<<f-1,s=t.charCodeAt(e-f)-48,s&1&&(h|=o),s&2&&(c|=o);return new n(h,c,e,i,r,u)},n.areEqual=function(n,t){return n&&t&&n.quadKey===t.quadKey&&n.crs===t.crs},n}(),si=function(){function n(){}return n.getLodFromGroundResolution=function(n,t,i){var u=Math.cos(t*h.radiansPerDegree)*156543.04,r=h.log2(u/n);return r=Math.round(r),Math.max(r-i,1)},n.pixelXYToTile=function(n,t,i){i===void 0&&(i=256);var r=Math.floor(n.x/i),u=Math.floor(n.y/i);return new oi(r,u,t,i,i,b.instance)},n.tileToPixelXY=function(n,t){t===void 0&&(t=256);var i=n.x*t,r=n.y*t;return new e(i,r)},n.quadKeyToLocationRect=function(t,r){r===void 0&&(r=256);var u=t.length,f=n.quadKeyToTileXY(t),e=f.x*r,o=f.y*r,s=e+r,h=o+r;return rt.fromCorners(i.createFrom(l.pixelXYToLatLong({x:e,y:o},u)),i.createFrom(l.pixelXYToLatLong({x:s,y:h},u)))},n.quadKeyToTileXY=function(n){for(var t,r=0,u=0,f=n.length,i=f;i>0;i--){t=1<<i-1;switch(n[f-i]){case"0":break;case"1":r|=t;break;case"2":u|=t;break;case"3":r|=t;u|=t;break;default:throw new Error("Invalid QuadKey digit sequence.");}}return new e(r,u)},n}(),tr=function(){function n(n){this._lodOffset=n?n:0}return n.prototype.getRegionsInBounds=function(t,i,r,u){r===void 0&&(r=256);var f=i-.001*i,e=n._getLodFromScale(f,this._lodOffset);return n._getRegionsInternal(t,e,r,u)},n.prototype.getRegions=function(t,i,u,f){u===void 0&&(u=256);var e=si.getLodFromGroundResolution(i,r.getCenter(t)[1],this._lodOffset);return n._getRegionsInternal(t,e,u,f)},n._getLodFromScale=function(t,i){for(var u,f=n._scaleToLod.length,r=0;r<f;r++)if(u=n._scaleToLod[r],t<=u.scale)return Math.max(u.lod-i,1);return 1},n._getRegionsInternal=function(n,t,i){var u=l.tileXYFromLocation(r.getNorthWest(n),t,new e(1,1)),f=l.tileXYFromLocation(r.getSouthEast(n),t,new e(-1,-1)),a=[],h=l.mapSizeFromLOD(t)/i,v=u.x<=f.x?f.x-u.x+1:h+f.x-u.x+1,o,c,s;for(r.crossesAntimeridian(n)&&r.getWidth(n)>=180&&u.x===f.x&&(v=h),o=u.x,c=0;c<v;c++){for(o===h&&(o=0),s=u.y;s<=f.y;s++)a.push(new oi(o,s,t,i,i));o++}return a},n._scaleToLod=[{scale:.0187,lod:23},{scale:.0373,lod:22},{scale:.0746,lod:21},{scale:.1493,lod:20},{scale:.2986,lod:19},{scale:.5972,lod:18},{scale:1.1943,lod:17},{scale:2.3887,lod:16},{scale:4.7773,lod:15},{scale:9.5546,lod:14},{scale:19.1093,lod:13},{scale:38.2185,lod:12},{scale:76.437,lod:11},{scale:152.8741,lod:10},{scale:305.7481,lod:9},{scale:611.4962,lod:8},{scale:1222.9925,lod:7},{scale:2445.9849,lod:6},{scale:4891.9698,lod:5},{scale:9783.9396,lod:4},{scale:19567.8792,lod:3},{scale:39135.7585,lod:2},{scale:Number.POSITIVE_INFINITY,lod:1}],n}();f.LatLonCrs=b;f.LatLonEncoder=ot;f.Location=i;f.MapQuadrant=pt;f.MapShell=bi;f.SimpleAreaPrimitive=ki;f.SimpleLinePrimitive=fi;f.SimplePointPrimitive=di;t.AzureMapInteractions=ft;t.BoundsAccumulator=et;t.Debug=ut;t.ElementSizeHelper=ri;t.EntityHelper=yt;t.Gimme=n;t.InteractionEventArgs=ui;t.Helper=w;t.LocationRectHelper=rt;t.MapMath=l;t.Overlay=ei;t.PyramidTileSpatialIndex=tr;t.PrimitiveOverlayHelper=wt;t.TileSystemHelper=si;t.VectorMath=h}catch(hi){if(f&&f.logger)f.logger.logCriticalError(hi);else throw hi;}}).call(window)